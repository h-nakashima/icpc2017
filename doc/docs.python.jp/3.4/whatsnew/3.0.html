<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>What’s New In Python 3.0 &mdash; Python 3.4.3 ドキュメント</title>
    
    <link rel="stylesheet" href="../_static/pydoctheme.css" type="text/css" />
    <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '../',
        VERSION:     '3.4.3',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="../_static/jquery.js"></script>
    <script type="text/javascript" src="../_static/underscore.js"></script>
    <script type="text/javascript" src="../_static/doctools.js"></script>
    <script type="text/javascript" src="../_static/translations.js"></script>
    <script type="text/javascript" src="../_static/sidebar.js"></script>
    <link rel="search" type="application/opensearchdescription+xml"
          title="Python 3.4.3 ドキュメント 内を検索"
          href="../_static/opensearch.xml"/>
    <link rel="author" title="このドキュメントについて" href="../about.html" />
    <link rel="copyright" title="著作権" href="../copyright.html" />
    <link rel="top" title="Python 3.4.3 ドキュメント" href="../contents.html" />
    <link rel="up" title="What’s New in Python" href="index.html" />
    <link rel="next" title="What’s New in Python 2.7" href="2.7.html" />
    <link rel="prev" title="What’s New In Python 3.1" href="3.1.html" />
    <link rel="shortcut icon" type="image/png" href="../_static/py.png" />
    <script type="text/javascript" src="../_static/copybutton.js"></script>
    <script type="text/javascript" src="../_static/_jp.js"></script>
    <script type="text/javascript" src="../_static/version_switch.js"></script>
    
 

  <script>
        (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
        (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
        m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
        })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

        ga('create', 'UA-34175846-1', 'python.jp');
        ga('send', 'pageview');

      </script>
  <body role="document">  
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>ナビゲーション</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../genindex.html" title="総合索引"
             accesskey="I">索引</a></li>
        <li class="right" >
          <a href="../py-modindex.html" title="Pythonモジュール索引"
             >モジュール</a> |</li>
        <li class="right" >
          <a href="2.7.html" title="What’s New in Python 2.7"
             accesskey="N">次へ</a> |</li>
        <li class="right" >
          <a href="3.1.html" title="What’s New In Python 3.1"
             accesskey="P">前へ</a> |</li>
        <li><img src="../_static/py.png" alt=""
                 style="vertical-align: middle; margin-top: -1px"/></li>
        <li><a href="https://www.python.org/">Python</a> &raquo;</li>
        <li>
          <span class="version_switcher_placeholder">3.4.3</span>
          <a href="../index.html">Documentation</a> &raquo;
        </li>

          <li class="nav-item nav-item-1"><a href="index.html" accesskey="U">What&#8217;s New in Python</a> &raquo;</li> 
      </ul>
    </div>    

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <div class="section" id="what-s-new-in-python-3-0">
<h1>What&#8217;s New In Python 3.0<a class="headerlink" href="#what-s-new-in-python-3-0" title="このヘッドラインへのパーマリンク">¶</a></h1>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Author:</th><td class="field-body">Guido van Rossum</td>
</tr>
</tbody>
</table>
<p>この記事では 2.6 と比較した Python 3.0 での新機能を解説します。
Python 3.0、あるいは &#8220;Python 3000&#8221;、 &#8220;Py3K&#8221; は初めて <em>意図的に後方非互換にした</em> Python のリリースです。
通常のリリースよりも多くの変更があり、全ての Python ユーザにとって重要です。
しかし、変更について理解したら Python に実際にはそれほど変更がないことが分かるでしょう。
全体的に見れば、よく知られた悩みの種が概ね解決され、昔の粗雑なものが取り除かれています。</p>
<p>この記事は全ての新機能を完璧な仕様を示そうとはしませんが、便利な概要については説明しようとしています。
全詳細については Python 3.0 のドキュメントや、本編で引かれている多くの PEP を参照してください。
特定の機能の実装や設計原理について完全に理解したいなら、通常のドキュメントよりも詳しいことが書いてある PEP を見るとよいでしょう。
しかし、一旦機能が完全に実装されると、普通 PEP は最新の状態に保たれないことに注意してください。</p>
<p>この文書で全項目に触れるべきなのですが、時間の制約のためそうではありません。
いつもの新リリースのように、 ソース配布の <cite>Misc/NEWS</cite> には些細な変更についても詳細な情報があります。</p>
<div class="section" id="common-stumbling-blocks">
<h2>よくある悩みの種<a class="headerlink" href="#common-stumbling-blocks" title="このヘッドラインへのパーマリンク">¶</a></h2>
<p>このセクションは Python 2.5 に慣れていたら躓いてしまいそうな少数の変更の一覧です。</p>
<div class="section" id="print-is-a-function">
<h3>print関数<a class="headerlink" href="#print-is-a-function" title="このヘッドラインへのパーマリンク">¶</a></h3>
<p><code class="docutils literal"><span class="pre">print</span></code> 文は <a class="reference internal" href="../library/functions.html#print" title="print"><code class="xref py py-func docutils literal"><span class="pre">print()</span></code></a> 関数に置き換えられ、古い <code class="docutils literal"><span class="pre">print</span></code> 文の特殊な文法の殆どがキーワード引数で置き換えられています (<span class="target" id="index-63"></span><a class="pep reference external" href="https://www.python.org/dev/peps/pep-3105"><strong>PEP 3105</strong></a>)。 例:</p>
<div class="highlight-python3"><div class="highlight"><pre><span class="n">Old</span><span class="p">:</span> <span class="nb">print</span> <span class="s">&quot;The answer is&quot;</span><span class="p">,</span> <span class="mi">2</span><span class="o">*</span><span class="mi">2</span>
<span class="n">New</span><span class="p">:</span> <span class="nb">print</span><span class="p">(</span><span class="s">&quot;The answer is&quot;</span><span class="p">,</span> <span class="mi">2</span><span class="o">*</span><span class="mi">2</span><span class="p">)</span>

<span class="n">Old</span><span class="p">:</span> <span class="nb">print</span> <span class="n">x</span><span class="p">,</span>           <span class="c"># Trailing comma suppresses newline</span>
<span class="n">New</span><span class="p">:</span> <span class="nb">print</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">end</span><span class="o">=</span><span class="s">&quot; &quot;</span><span class="p">)</span>  <span class="c"># Appends a space instead of a newline</span>

<span class="n">Old</span><span class="p">:</span> <span class="nb">print</span>              <span class="c"># Prints a newline</span>
<span class="n">New</span><span class="p">:</span> <span class="nb">print</span><span class="p">()</span>            <span class="c"># You must call the function!</span>

<span class="n">Old</span><span class="p">:</span> <span class="nb">print</span> <span class="o">&gt;&gt;</span><span class="n">sys</span><span class="o">.</span><span class="n">stderr</span><span class="p">,</span> <span class="s">&quot;fatal error&quot;</span>
<span class="n">New</span><span class="p">:</span> <span class="nb">print</span><span class="p">(</span><span class="s">&quot;fatal error&quot;</span><span class="p">,</span> <span class="n">file</span><span class="o">=</span><span class="n">sys</span><span class="o">.</span><span class="n">stderr</span><span class="p">)</span>

<span class="n">Old</span><span class="p">:</span> <span class="nb">print</span> <span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">)</span>       <span class="c"># prints repr((x, y))</span>
<span class="n">New</span><span class="p">:</span> <span class="nb">print</span><span class="p">((</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">))</span>      <span class="c"># Not the same as print(x, y)!</span>
</pre></div>
</div>
<p>項目間の区切りをカスタマイズすることもできます。例:</p>
<div class="highlight-python3"><div class="highlight"><pre><span class="nb">print</span><span class="p">(</span><span class="s">&quot;There are &lt;&quot;</span><span class="p">,</span> <span class="mi">2</span><span class="o">**</span><span class="mi">32</span><span class="p">,</span> <span class="s">&quot;&gt; possibilities!&quot;</span><span class="p">,</span> <span class="n">sep</span><span class="o">=</span><span class="s">&quot;&quot;</span><span class="p">)</span>
</pre></div>
</div>
<p>これは以下を出力します</p>
<div class="highlight-python3"><div class="highlight"><pre>There are &lt;4294967296&gt; possibilities!
</pre></div>
</div>
<p>注釈:</p>
<ul class="simple">
<li><p class="first"><a class="reference internal" href="../library/functions.html#print" title="print"><code class="xref py py-func docutils literal"><span class="pre">print()</span></code></a> 関数は、古い <code class="docutils literal"><span class="pre">print</span></code> 文の &#8220;ソフトスペース&#8221; 機能をサポートしません。例えば Python 2.x では、 <code class="docutils literal"><span class="pre">print</span> <span class="pre">&quot;A\n&quot;,</span> <span class="pre">&quot;B&quot;</span></code> は <code class="docutils literal"><span class="pre">&quot;A\nB\n&quot;</span></code> を出力していましたが、 Python 3.0 では、 <code class="docutils literal"><span class="pre">print(&quot;A\n&quot;,</span> <span class="pre">&quot;B&quot;)</span></code> は <code class="docutils literal"><span class="pre">&quot;A\n</span> <span class="pre">B\n&quot;</span></code> を出力します。</p>
</li>
<li><p class="first">最初は、対話モードで古い <code class="docutils literal"><span class="pre">print</span> <span class="pre">x</span></code> を何回もタイプしてしまうでしょう。代わりに <code class="docutils literal"><span class="pre">print(x)</span></code> とタイプするよう再教育してください。</p>
</li>
<li><p class="first"><code class="docutils literal"><span class="pre">2to3</span></code> ソース変換ツールを使うと、すべての <code class="docutils literal"><span class="pre">print</span></code> 文が <a class="reference internal" href="../library/functions.html#print" title="print"><code class="xref py py-func docutils literal"><span class="pre">print()</span></code></a> 関数呼び出しに自動的に置換されるので、大きなプロジェクトでもさほど問題にならないでしょう。</p>
</li>
</ul>
</div>
<div class="section" id="views-and-iterators-instead-of-lists">
<h3>リストからビューおよびイテレータへ<a class="headerlink" href="#views-and-iterators-instead-of-lists" title="このヘッドラインへのパーマリンク">¶</a></h3>
<p>いくつかの良く使われている API はもはやリストを返しません:</p>
<ul>
<li><p class="first"><a class="reference internal" href="../library/stdtypes.html#dict" title="dict"><code class="xref py py-class docutils literal"><span class="pre">dict</span></code></a> の <a class="reference internal" href="../library/stdtypes.html#dict.keys" title="dict.keys"><code class="xref py py-meth docutils literal"><span class="pre">dict.keys()</span></code></a>, <a class="reference internal" href="../library/stdtypes.html#dict.items" title="dict.items"><code class="xref py py-meth docutils literal"><span class="pre">dict.items()</span></code></a> そして <a class="reference internal" href="../library/stdtypes.html#dict.values" title="dict.values"><code class="xref py py-meth docutils literal"><span class="pre">dict.values()</span></code></a> メソッドはリストの代わりに &#8220;views&#8221; を返します。 例えば: <code class="docutils literal"><span class="pre">k</span> <span class="pre">=</span> <span class="pre">d.keys();</span> <span class="pre">k.sort()</span></code> は上手く動きません。 代わりに <code class="docutils literal"><span class="pre">k</span> <span class="pre">=</span> <span class="pre">sorted(d)</span></code> を使ってください (これは Python 2.5 でも動作し、効率的です)。</p>
</li>
<li><p class="first"><code class="xref py py-meth docutils literal"><span class="pre">dict.iterkeys()</span></code>、 <code class="xref py py-meth docutils literal"><span class="pre">dict.iteritems()</span></code>、 <code class="xref py py-meth docutils literal"><span class="pre">dict.itervalues()</span></code> メソッドはもうサポートされません。</p>
</li>
<li><p class="first"><a class="reference internal" href="../library/functions.html#map" title="map"><code class="xref py py-func docutils literal"><span class="pre">map()</span></code></a> and <a class="reference internal" href="../library/functions.html#filter" title="filter"><code class="xref py py-func docutils literal"><span class="pre">filter()</span></code></a> return iterators.  If you really need
a list and the input sequences are all of equal length, a quick
fix is to wrap <a class="reference internal" href="../library/functions.html#map" title="map"><code class="xref py py-func docutils literal"><span class="pre">map()</span></code></a> in <a class="reference internal" href="../library/stdtypes.html#list" title="list"><code class="xref py py-func docutils literal"><span class="pre">list()</span></code></a>, e.g. <code class="docutils literal"><span class="pre">list(map(...))</span></code>,
but a better fix is
often to use a list comprehension (especially when the original code
uses <a class="reference internal" href="../reference/expressions.html#lambda"><code class="xref std std-keyword docutils literal"><span class="pre">lambda</span></code></a>), or rewriting the code so it doesn&#8217;t need a
list at all.  Particularly tricky is <a class="reference internal" href="../library/functions.html#map" title="map"><code class="xref py py-func docutils literal"><span class="pre">map()</span></code></a> invoked for the
side effects of the function; the correct transformation is to use a
regular <a class="reference internal" href="../reference/compound_stmts.html#for"><code class="xref std std-keyword docutils literal"><span class="pre">for</span></code></a> loop (since creating a list would just be
wasteful).</p>
<p>If the input sequences are not of equal length, <a class="reference internal" href="../library/functions.html#map" title="map"><code class="xref py py-func docutils literal"><span class="pre">map()</span></code></a> will
stop at the termination of the shortest of the sequences. For full
compatibility with <a class="reference internal" href="../library/functions.html#map" title="map"><code class="xref py py-func docutils literal"><span class="pre">map()</span></code></a> from Python 2.x, also wrap the sequences in
<a class="reference internal" href="../library/itertools.html#itertools.zip_longest" title="itertools.zip_longest"><code class="xref py py-func docutils literal"><span class="pre">itertools.zip_longest()</span></code></a>, e.g. <code class="docutils literal"><span class="pre">map(func,</span> <span class="pre">*sequences)</span></code> becomes
<code class="docutils literal"><span class="pre">list(map(func,</span> <span class="pre">itertools.zip_longest(*sequences)))</span></code>.</p>
</li>
<li><p class="first"><a class="reference internal" href="../library/stdtypes.html#range" title="range"><code class="xref py py-func docutils literal"><span class="pre">range()</span></code></a> は <code class="xref py py-func docutils literal"><span class="pre">xrange()</span></code> のように振る舞います。ただし、任意のサイズの値で動作します。 <code class="xref py py-func docutils literal"><span class="pre">xrange()</span></code> は削除されました。</p>
</li>
<li><p class="first"><a class="reference internal" href="../library/functions.html#zip" title="zip"><code class="xref py py-func docutils literal"><span class="pre">zip()</span></code></a> はイテレータを返します。</p>
</li>
</ul>
</div>
<div class="section" id="ordering-comparisons">
<h3>順序比較<a class="headerlink" href="#ordering-comparisons" title="このヘッドラインへのパーマリンク">¶</a></h3>
<p>Python 3.0 で順序比較のルールが簡単になりました。</p>
<ul class="simple">
<li><p class="first">順序比較演算子 (<code class="docutils literal"><span class="pre">&lt;</span></code>, <code class="docutils literal"><span class="pre">&lt;=</span></code>, <code class="docutils literal"><span class="pre">&gt;=</span></code>, <code class="docutils literal"><span class="pre">&gt;</span></code>)  は、そのオペランドが自然な順序づけを持たない場合 TypeError 例外を送出します。  <code class="docutils literal"><span class="pre">1</span> <span class="pre">&lt;</span> <span class="pre">''</span></code>, <code class="docutils literal"><span class="pre">0</span> <span class="pre">&gt;</span> <span class="pre">None</span></code> または <code class="docutils literal"><span class="pre">len</span> <span class="pre">&lt;=</span> <span class="pre">len</span></code> のような式は無効になり、 <code class="docutils literal"><span class="pre">None</span> <span class="pre">&lt;</span> <span class="pre">None</span></code> は <code class="docutils literal"><span class="pre">False</span></code> を返す代わりに <a class="reference internal" href="../library/exceptions.html#TypeError" title="TypeError"><code class="xref py py-exc docutils literal"><span class="pre">TypeError</span></code></a> を送出します。その結果、 不均一なリスト（訳注：比較不能な型からなる要素が混在するリスト）のソートは意味がなくなりました。 &#8211; 全ての要素は互いに比較できなければなりません。これは <code class="docutils literal"><span class="pre">==</span></code> と <code class="docutils literal"><span class="pre">!=</span></code> 演算子には適用されないことに注意してください: 別々の比較不可能な型のオブジェクトを比較すると、互いに等しくないと常になります。</p>
</li>
<li><p class="first"><code class="xref py py-meth docutils literal"><span class="pre">builtin.sorted()</span></code> と <a class="reference internal" href="../library/stdtypes.html#list.sort" title="list.sort"><code class="xref py py-meth docutils literal"><span class="pre">list.sort()</span></code></a> メソッドは比較関数を与える <em>cmp</em> 引数を受け取らなくなりました。 かわりに <em>key</em> 引数を使用してください。 <em>key</em> と <em>reverse</em> 引数は &#8220;キーワード専用&#8221; となったことに注意してください。</p>
</li>
<li><p class="first"><code class="xref py py-func docutils literal"><span class="pre">cmp()</span></code> 関数は廃止され、 <code class="xref py py-meth docutils literal"><span class="pre">__cmp__()</span></code> 特殊関数はもはやサポートされません。ソートには <a class="reference internal" href="../reference/datamodel.html#object.__lt__" title="object.__lt__"><code class="xref py py-meth docutils literal"><span class="pre">__lt__()</span></code></a> を使用し、 <a class="reference internal" href="../reference/datamodel.html#object.__hash__" title="object.__hash__"><code class="xref py py-meth docutils literal"><span class="pre">__hash__()</span></code></a> には <a class="reference internal" href="../reference/datamodel.html#object.__eq__" title="object.__eq__"><code class="xref py py-meth docutils literal"><span class="pre">__eq__()</span></code></a>  を 、必要に応じて他の高級比較 (rich comparison) を使用してください。 (もし <code class="xref py py-func docutils literal"><span class="pre">cmp()</span></code> の機能が必要なら、 式 <code class="docutils literal"><span class="pre">(a</span> <span class="pre">&gt;</span> <span class="pre">b)</span> <span class="pre">-</span> <span class="pre">(a</span> <span class="pre">&lt;</span> <span class="pre">b)</span></code> を <code class="docutils literal"><span class="pre">cmp(a,</span> <span class="pre">b)</span></code> の代わに使用できるはずです)</p>
</li>
</ul>
</div>
<div class="section" id="integers">
<h3>整数<a class="headerlink" href="#integers" title="このヘッドラインへのパーマリンク">¶</a></h3>
<ul class="simple">
<li><p class="first"><span class="target" id="index-64"></span><a class="pep reference external" href="https://www.python.org/dev/peps/pep-0237"><strong>PEP 0237</strong></a>: 基本的には、 <code class="xref py py-class docutils literal"><span class="pre">long</span></code> は <a class="reference internal" href="../library/functions.html#int" title="int"><code class="xref py py-class docutils literal"><span class="pre">int</span></code></a> に改名されました。これは、整数型の唯一の組み込み型になり、 <a class="reference internal" href="../library/functions.html#int" title="int"><code class="xref py py-class docutils literal"><span class="pre">int</span></code></a> と名付けられていますが、古い <code class="xref py py-class docutils literal"><span class="pre">long</span></code> 型とほぼ同じように振る舞います。</p>
</li>
<li><span class="target" id="index-2"></span><a class="pep reference external" href="https://www.python.org/dev/peps/pep-0238"><strong>PEP 0238</strong></a>: An expression like <code class="docutils literal"><span class="pre">1/2</span></code> returns a float.  Use
<code class="docutils literal"><span class="pre">1//2</span></code> to get the truncating behavior.  (The latter syntax has
existed for years, at least since Python 2.2.)</li>
<li><p class="first">整数の上限がなくなったため、<code class="xref py py-data docutils literal"><span class="pre">sys.maxint</span></code> 定数は削除されました。
しかしながら、通常のリストや文字列の添え字よりも大きい整数として <a class="reference internal" href="../library/sys.html#sys.maxsize" title="sys.maxsize"><code class="xref py py-data docutils literal"><span class="pre">sys.maxsize</span></code></a> を使うことができます。
<a class="reference internal" href="../library/sys.html#sys.maxsize" title="sys.maxsize"><code class="xref py py-data docutils literal"><span class="pre">sys.maxsize</span></code></a> は実装の &#8220;自然&#8221; 数の大きさに一致し、
同じプラットフォームでは (同じビルドオプションなら) 過去のリリースの <code class="xref py py-data docutils literal"><span class="pre">sys.maxint</span></code> と普通は同じです。</p>
</li>
<li><p class="first">long 整数の <a class="reference internal" href="../library/functions.html#repr" title="repr"><code class="xref py py-func docutils literal"><span class="pre">repr()</span></code></a> はもはや末尾に <code class="docutils literal"><span class="pre">L</span></code> を持ちません。そのため、無条件に &#8220;L&#8221; を取り除くコードは代わりに最後の数字を取り除いてしまうでしょう。 (代わりに <a class="reference internal" href="../library/stdtypes.html#str" title="str"><code class="xref py py-func docutils literal"><span class="pre">str()</span></code></a> を使用してください。)</p>
</li>
<li><p class="first">8進数リテラルが <code class="docutils literal"><span class="pre">0720</span></code> の形でなくなりました。代わりに <code class="docutils literal"><span class="pre">0o720</span></code> を使ってください。</p>
</li>
</ul>
</div>
<div class="section" id="text-vs-data-instead-of-unicode-vs-8-bit">
<h3>ユニコード Vs. 8ビットからテクスト Vs. データへ<a class="headerlink" href="#text-vs-data-instead-of-unicode-vs-8-bit" title="このヘッドラインへのパーマリンク">¶</a></h3>
<p>バイナリとユニコードについて知っていると思っている全てが変わりました。</p>
<ul class="simple">
<li>Python 3.0 uses the concepts of <em>text</em> and (binary) <em>data</em> instead
of Unicode strings and 8-bit strings.  All text is Unicode; however
<em>encoded</em> Unicode is represented as binary data.  The type used to
hold text is <a class="reference internal" href="../library/stdtypes.html#str" title="str"><code class="xref py py-class docutils literal"><span class="pre">str</span></code></a>, the type used to hold data is
<a class="reference internal" href="../library/functions.html#bytes" title="bytes"><code class="xref py py-class docutils literal"><span class="pre">bytes</span></code></a>.  The biggest difference with the 2.x situation is
that any attempt to mix text and data in Python 3.0 raises
<a class="reference internal" href="../library/exceptions.html#TypeError" title="TypeError"><code class="xref py py-exc docutils literal"><span class="pre">TypeError</span></code></a>, whereas if you were to mix Unicode and 8-bit
strings in Python 2.x, it would work if the 8-bit string happened to
contain only 7-bit (ASCII) bytes, but you would get
<a class="reference internal" href="../library/exceptions.html#UnicodeDecodeError" title="UnicodeDecodeError"><code class="xref py py-exc docutils literal"><span class="pre">UnicodeDecodeError</span></code></a> if it contained non-ASCII values.  This
value-specific behavior has caused numerous sad faces over the
years.</li>
<li>As a consequence of this change in philosophy, pretty much all code
that uses Unicode, encodings or binary data most likely has to
change.  The change is for the better, as in the 2.x world there
were numerous bugs having to do with mixing encoded and unencoded
text.  To be prepared in Python 2.x, start using <code class="xref py py-class docutils literal"><span class="pre">unicode</span></code>
for all unencoded text, and <a class="reference internal" href="../library/stdtypes.html#str" title="str"><code class="xref py py-class docutils literal"><span class="pre">str</span></code></a> for binary or encoded data
only.  Then the <code class="docutils literal"><span class="pre">2to3</span></code> tool will do most of the work for you.</li>
<li><p class="first">ユニコードテキストのリテラルに <code class="docutils literal"><span class="pre">u&quot;...&quot;</span></code> を使うことはもはやできません。しかし、バイナリーデータのリテラルには <code class="docutils literal"><span class="pre">b&quot;...&quot;</span></code> を使わなければなりません。</p>
</li>
<li>As the <a class="reference internal" href="../library/stdtypes.html#str" title="str"><code class="xref py py-class docutils literal"><span class="pre">str</span></code></a> and <a class="reference internal" href="../library/functions.html#bytes" title="bytes"><code class="xref py py-class docutils literal"><span class="pre">bytes</span></code></a> types cannot be mixed, you
must always explicitly convert between them.  Use <a class="reference internal" href="../library/stdtypes.html#str.encode" title="str.encode"><code class="xref py py-meth docutils literal"><span class="pre">str.encode()</span></code></a>
to go from <a class="reference internal" href="../library/stdtypes.html#str" title="str"><code class="xref py py-class docutils literal"><span class="pre">str</span></code></a> to <a class="reference internal" href="../library/functions.html#bytes" title="bytes"><code class="xref py py-class docutils literal"><span class="pre">bytes</span></code></a>, and <a class="reference internal" href="../library/stdtypes.html#bytes.decode" title="bytes.decode"><code class="xref py py-meth docutils literal"><span class="pre">bytes.decode()</span></code></a>
to go from <a class="reference internal" href="../library/functions.html#bytes" title="bytes"><code class="xref py py-class docutils literal"><span class="pre">bytes</span></code></a> to <a class="reference internal" href="../library/stdtypes.html#str" title="str"><code class="xref py py-class docutils literal"><span class="pre">str</span></code></a>.  You can also use
<code class="docutils literal"><span class="pre">bytes(s,</span> <span class="pre">encoding=...)</span></code> and <code class="docutils literal"><span class="pre">str(b,</span> <span class="pre">encoding=...)</span></code>,
respectively.</li>
<li>Like <a class="reference internal" href="../library/stdtypes.html#str" title="str"><code class="xref py py-class docutils literal"><span class="pre">str</span></code></a>, the <a class="reference internal" href="../library/functions.html#bytes" title="bytes"><code class="xref py py-class docutils literal"><span class="pre">bytes</span></code></a> type is immutable.  There is a
separate <em>mutable</em> type to hold buffered binary data,
<a class="reference internal" href="../library/functions.html#bytearray" title="bytearray"><code class="xref py py-class docutils literal"><span class="pre">bytearray</span></code></a>.  Nearly all APIs that accept <a class="reference internal" href="../library/functions.html#bytes" title="bytes"><code class="xref py py-class docutils literal"><span class="pre">bytes</span></code></a> also
accept <a class="reference internal" href="../library/functions.html#bytearray" title="bytearray"><code class="xref py py-class docutils literal"><span class="pre">bytearray</span></code></a>.  The mutable API is based on
<code class="xref py py-class docutils literal"><span class="pre">collections.MutableSequence</span></code>.</li>
<li>All backslashes in raw string literals are interpreted literally.
This means that <code class="docutils literal"><span class="pre">'\U'</span></code> and <code class="docutils literal"><span class="pre">'\u'</span></code> escapes in raw strings are not
treated specially.  For example, <code class="docutils literal"><span class="pre">r'\u20ac'</span></code> is a string of 6
characters in Python 3.0, whereas in 2.6, <code class="docutils literal"><span class="pre">ur'\u20ac'</span></code> was the
single &#8220;euro&#8221; character.  (Of course, this change only affects raw
string literals; the euro character is <code class="docutils literal"><span class="pre">'\u20ac'</span></code> in Python 3.0.)</li>
<li>The built-in <code class="xref py py-class docutils literal"><span class="pre">basestring</span></code> abstract type was removed.  Use
<a class="reference internal" href="../library/stdtypes.html#str" title="str"><code class="xref py py-class docutils literal"><span class="pre">str</span></code></a> instead.  The <a class="reference internal" href="../library/stdtypes.html#str" title="str"><code class="xref py py-class docutils literal"><span class="pre">str</span></code></a> and <a class="reference internal" href="../library/functions.html#bytes" title="bytes"><code class="xref py py-class docutils literal"><span class="pre">bytes</span></code></a> types
don&#8217;t have functionality enough in common to warrant a shared base
class.  The <code class="docutils literal"><span class="pre">2to3</span></code> tool (see below) replaces every occurrence of
<code class="xref py py-class docutils literal"><span class="pre">basestring</span></code> with <a class="reference internal" href="../library/stdtypes.html#str" title="str"><code class="xref py py-class docutils literal"><span class="pre">str</span></code></a>.</li>
<li>Files opened as text files (still the default mode for <a class="reference internal" href="../library/functions.html#open" title="open"><code class="xref py py-func docutils literal"><span class="pre">open()</span></code></a>)
always use an encoding to map between strings (in memory) and bytes
(on disk).  Binary files (opened with a <code class="docutils literal"><span class="pre">b</span></code> in the mode argument)
always use bytes in memory.  This means that if a file is opened
using an incorrect mode or encoding, I/O will likely fail loudly,
instead of silently producing incorrect data.  It also means that
even Unix users will have to specify the correct mode (text or
binary) when opening a file.  There is a platform-dependent default
encoding, which on Unixy platforms can be set with the <code class="docutils literal"><span class="pre">LANG</span></code>
environment variable (and sometimes also with some other
platform-specific locale-related environment variables).  In many
cases, but not all, the system default is UTF-8; you should never
count on this default.  Any application reading or writing more than
pure ASCII text should probably have a way to override the encoding.
There is no longer any need for using the encoding-aware streams
in the <a class="reference internal" href="../library/codecs.html#module-codecs" title="codecs: Encode and decode data and streams."><code class="xref py py-mod docutils literal"><span class="pre">codecs</span></code></a> module.</li>
<li>The initial values of <a class="reference internal" href="../library/sys.html#sys.stdin" title="sys.stdin"><code class="xref py py-data docutils literal"><span class="pre">sys.stdin</span></code></a>, <a class="reference internal" href="../library/sys.html#sys.stdout" title="sys.stdout"><code class="xref py py-data docutils literal"><span class="pre">sys.stdout</span></code></a> and
<a class="reference internal" href="../library/sys.html#sys.stderr" title="sys.stderr"><code class="xref py py-data docutils literal"><span class="pre">sys.stderr</span></code></a> are now unicode-only text files (i.e., they are
instances of <a class="reference internal" href="../library/io.html#io.TextIOBase" title="io.TextIOBase"><code class="xref py py-class docutils literal"><span class="pre">io.TextIOBase</span></code></a>).  To read and write bytes data
with these streams, you need to use their <a class="reference internal" href="../library/io.html#io.TextIOBase.buffer" title="io.TextIOBase.buffer"><code class="xref py py-data docutils literal"><span class="pre">io.TextIOBase.buffer</span></code></a>
attribute.</li>
<li>Filenames are passed to and returned from APIs as (Unicode) strings.
This can present platform-specific problems because on some
platforms filenames are arbitrary byte strings.  (On the other hand,
on Windows filenames are natively stored as Unicode.)  As a
work-around, most APIs (e.g. <a class="reference internal" href="../library/functions.html#open" title="open"><code class="xref py py-func docutils literal"><span class="pre">open()</span></code></a> and many functions in the
<a class="reference internal" href="../library/os.html#module-os" title="os: Miscellaneous operating system interfaces."><code class="xref py py-mod docutils literal"><span class="pre">os</span></code></a> module) that take filenames accept <a class="reference internal" href="../library/functions.html#bytes" title="bytes"><code class="xref py py-class docutils literal"><span class="pre">bytes</span></code></a> objects
as well as strings, and a few APIs have a way to ask for a
<a class="reference internal" href="../library/functions.html#bytes" title="bytes"><code class="xref py py-class docutils literal"><span class="pre">bytes</span></code></a> return value.  Thus, <a class="reference internal" href="../library/os.html#os.listdir" title="os.listdir"><code class="xref py py-func docutils literal"><span class="pre">os.listdir()</span></code></a> returns a
list of <a class="reference internal" href="../library/functions.html#bytes" title="bytes"><code class="xref py py-class docutils literal"><span class="pre">bytes</span></code></a> instances if the argument is a <a class="reference internal" href="../library/functions.html#bytes" title="bytes"><code class="xref py py-class docutils literal"><span class="pre">bytes</span></code></a>
instance, and <a class="reference internal" href="../library/os.html#os.getcwdb" title="os.getcwdb"><code class="xref py py-func docutils literal"><span class="pre">os.getcwdb()</span></code></a> returns the current working
directory as a <a class="reference internal" href="../library/functions.html#bytes" title="bytes"><code class="xref py py-class docutils literal"><span class="pre">bytes</span></code></a> instance.  Note that when
<a class="reference internal" href="../library/os.html#os.listdir" title="os.listdir"><code class="xref py py-func docutils literal"><span class="pre">os.listdir()</span></code></a> returns a list of strings, filenames that
cannot be decoded properly are omitted rather than raising
<a class="reference internal" href="../library/exceptions.html#UnicodeError" title="UnicodeError"><code class="xref py py-exc docutils literal"><span class="pre">UnicodeError</span></code></a>.</li>
<li>Some system APIs like <a class="reference internal" href="../library/os.html#os.environ" title="os.environ"><code class="xref py py-data docutils literal"><span class="pre">os.environ</span></code></a> and <a class="reference internal" href="../library/sys.html#sys.argv" title="sys.argv"><code class="xref py py-data docutils literal"><span class="pre">sys.argv</span></code></a> can
also present problems when the bytes made available by the system is
not interpretable using the default encoding.  Setting the <code class="docutils literal"><span class="pre">LANG</span></code>
variable and rerunning the program is probably the best approach.</li>
<li><span class="target" id="index-3"></span><a class="pep reference external" href="https://www.python.org/dev/peps/pep-3138"><strong>PEP 3138</strong></a>: The <a class="reference internal" href="../library/functions.html#repr" title="repr"><code class="xref py py-func docutils literal"><span class="pre">repr()</span></code></a> of a string no longer escapes
non-ASCII characters.  It still escapes control characters and code
points with non-printable status in the Unicode standard, however.</li>
<li><p class="first"><span class="target" id="index-66"></span><a class="pep reference external" href="https://www.python.org/dev/peps/pep-3120"><strong>PEP 3120</strong></a>: ソースのエンコードのデフォルトが UTF-8 になりました。</p>
</li>
<li><span class="target" id="index-5"></span><a class="pep reference external" href="https://www.python.org/dev/peps/pep-3131"><strong>PEP 3131</strong></a>: Non-ASCII letters are now allowed in identifiers.
(However, the standard library remains ASCII-only with the exception
of contributor names in comments.)</li>
<li><p class="first"><code class="xref py py-mod docutils literal"><span class="pre">StringIO</span></code> および <code class="xref py py-mod docutils literal"><span class="pre">cStringIO</span></code> モジュールは廃止されました。その代わり <a class="reference internal" href="../library/io.html#module-io" title="io: Core tools for working with streams."><code class="xref py py-mod docutils literal"><span class="pre">io</span></code></a> モジュールをインポートして、テキストやデータには <a class="reference internal" href="../library/io.html#io.StringIO" title="io.StringIO"><code class="xref py py-class docutils literal"><span class="pre">io.StringIO</span></code></a> や <a class="reference internal" href="../library/io.html#io.BytesIO" title="io.BytesIO"><code class="xref py py-class docutils literal"><span class="pre">io.BytesIO</span></code></a> を使用してください。</p>
</li>
<li><p class="first"><a class="reference internal" href="../howto/unicode.html#unicode-howto"><span>Unicode HOWTO</span></a> を参照してください。Python 3.0 向けに更新されました。</p>
</li>
</ul>
</div>
</div>
<div class="section" id="overview-of-syntax-changes">
<h2>構文の変更の概要<a class="headerlink" href="#overview-of-syntax-changes" title="このヘッドラインへのパーマリンク">¶</a></h2>
<p>このセクションは Python 3.0 における全ての <em>構文の</em> 変更についての簡単な概要です。</p>
<div class="section" id="new-syntax">
<h3>新たな構文<a class="headerlink" href="#new-syntax" title="このヘッドラインへのパーマリンク">¶</a></h3>
<ul>
<li><p class="first"><span class="target" id="index-6"></span><a class="pep reference external" href="https://www.python.org/dev/peps/pep-3107"><strong>PEP 3107</strong></a>: Function argument and return value annotations.  This
provides a standardized way of annotating a function&#8217;s parameters
and return value.  There are no semantics attached to such
annotations except that they can be introspected at runtime using
the <code class="xref py py-attr docutils literal"><span class="pre">__annotations__</span></code> attribute.  The intent is to encourage
experimentation through metaclasses, decorators or frameworks.</p>
</li>
<li><p class="first"><span class="target" id="index-7"></span><a class="pep reference external" href="https://www.python.org/dev/peps/pep-3102"><strong>PEP 3102</strong></a>: Keyword-only arguments.  Named parameters occurring
after <code class="docutils literal"><span class="pre">*args</span></code> in the parameter list <em>must</em> be specified using
keyword syntax in the call.  You can also use a bare <code class="docutils literal"><span class="pre">*</span></code> in the
parameter list to indicate that you don&#8217;t accept a variable-length
argument list, but you do have keyword-only arguments.</p>
</li>
<li><p class="first">Keyword arguments are allowed after the list of base classes in a
class definition.  This is used by the new convention for specifying
a metaclass (see next section), but can be used for other purposes
as well, as long as the metaclass supports it.</p>
</li>
<li><p class="first"><span class="target" id="index-8"></span><a class="pep reference external" href="https://www.python.org/dev/peps/pep-3104"><strong>PEP 3104</strong></a>: <a class="reference internal" href="../reference/simple_stmts.html#nonlocal"><code class="xref std std-keyword docutils literal"><span class="pre">nonlocal</span></code></a> statement.  Using <code class="docutils literal"><span class="pre">nonlocal</span> <span class="pre">x</span></code>
you can now assign directly to a variable in an outer (but
non-global) scope.  <a class="reference internal" href="../reference/simple_stmts.html#nonlocal"><code class="xref std std-keyword docutils literal"><span class="pre">nonlocal</span></code></a> is a new reserved word.</p>
</li>
<li><p class="first"><span class="target" id="index-9"></span><a class="pep reference external" href="https://www.python.org/dev/peps/pep-3132"><strong>PEP 3132</strong></a>: Extended Iterable Unpacking.  You can now write things
like <code class="docutils literal"><span class="pre">a,</span> <span class="pre">b,</span> <span class="pre">*rest</span> <span class="pre">=</span> <span class="pre">some_sequence</span></code>.  And even <code class="docutils literal"><span class="pre">*rest,</span> <span class="pre">a</span> <span class="pre">=</span>
<span class="pre">stuff</span></code>.  The <code class="docutils literal"><span class="pre">rest</span></code> object is always a (possibly empty) list; the
right-hand side may be any iterable.  Example:</p>
<div class="highlight-python3"><div class="highlight"><pre><span class="p">(</span><span class="n">a</span><span class="p">,</span> <span class="o">*</span><span class="n">rest</span><span class="p">,</span> <span class="n">b</span><span class="p">)</span> <span class="o">=</span> <span class="nb">range</span><span class="p">(</span><span class="mi">5</span><span class="p">)</span>
</pre></div>
</div>
<p>This sets <em>a</em> to <code class="docutils literal"><span class="pre">0</span></code>, <em>b</em> to <code class="docutils literal"><span class="pre">4</span></code>, and <em>rest</em> to <code class="docutils literal"><span class="pre">[1,</span> <span class="pre">2,</span> <span class="pre">3]</span></code>.</p>
</li>
<li><p class="first">辞書内包表記: <code class="docutils literal"><span class="pre">{k:</span> <span class="pre">v</span> <span class="pre">for</span> <span class="pre">k,</span> <span class="pre">v</span> <span class="pre">in</span> <span class="pre">stuff}</span></code> は <code class="docutils literal"><span class="pre">dict(stuff)</span></code> と同じ意味ですが、より柔軟です。 (これは <span class="target" id="index-67"></span><a class="pep reference external" href="https://www.python.org/dev/peps/pep-0274"><strong>PEP 0274</strong></a> で支持されています。)</p>
</li>
<li><p class="first">セットリテラル、例えば <code class="docutils literal"><span class="pre">{1,</span> <span class="pre">2}</span></code>。<code class="docutils literal"><span class="pre">{}</span></code> は空の辞書であることに注意してください。空のセットには <code class="docutils literal"><span class="pre">set()</span></code> を使用してください。セットの内包表記もサポートされました。例えば <code class="docutils literal"><span class="pre">{x</span> <span class="pre">for</span> <span class="pre">x</span> <span class="pre">in</span> <span class="pre">stuff}</span></code> は <code class="docutils literal"><span class="pre">set(stuff)</span></code> と同じ意味ですが、より柔軟です。</p>
</li>
<li><p class="first">新たな8進数リテラル、e.g. <code class="docutils literal"><span class="pre">0o720</span></code> (2.6 で既にありました)。古い8進数リテラル (<code class="docutils literal"><span class="pre">0720</span></code>) は廃止されました。</p>
</li>
<li><p class="first">新たなバイナリリテラル、e.g. <code class="docutils literal"><span class="pre">0b1010</span></code> (2.6 で既にありました) と、関連する新しい組み込み関数 <a class="reference internal" href="../library/functions.html#bytes" title="bytes"><code class="xref py py-func docutils literal"><span class="pre">bytes()</span></code></a> が導入されました。</p>
</li>
<li><p class="first"><code class="docutils literal"><span class="pre">b</span></code> または <code class="docutils literal"><span class="pre">B</span></code> で始まるバイトリテラルと、関連する新しい組み込み関数 <a class="reference internal" href="../library/functions.html#bytes" title="bytes"><code class="xref py py-func docutils literal"><span class="pre">bytes()</span></code></a> が導入されました。</p>
</li>
</ul>
</div>
<div class="section" id="changed-syntax">
<h3>変更された構文<a class="headerlink" href="#changed-syntax" title="このヘッドラインへのパーマリンク">¶</a></h3>
<ul>
<li><p class="first"><span class="target" id="index-68"></span><a class="pep reference external" href="https://www.python.org/dev/peps/pep-3109"><strong>PEP 3109</strong></a> と <span class="target" id="index-69"></span><a class="pep reference external" href="https://www.python.org/dev/peps/pep-3134"><strong>PEP 3134</strong></a>: 新たな <a class="reference internal" href="../reference/simple_stmts.html#raise"><code class="xref std std-keyword docutils literal"><span class="pre">raise</span></code></a> 文のシンタックス: <code class="samp docutils literal"><span class="pre">raise</span> <span class="pre">[</span><em><span class="pre">expr</span></em> <span class="pre">[from</span> <em><span class="pre">expr</span></em><span class="pre">]]</span></code>。以下を参照してください。</p>
</li>
<li><p class="first"><a class="reference internal" href="../reference/compound_stmts.html#as"><code class="xref std std-keyword docutils literal"><span class="pre">as</span></code></a> と <a class="reference internal" href="../reference/compound_stmts.html#with"><code class="xref std std-keyword docutils literal"><span class="pre">with</span></code></a> は予約語になりました。 (実際には 2.6 から)</p>
</li>
<li><p class="first"><code class="docutils literal"><span class="pre">True</span></code>、<code class="docutils literal"><span class="pre">False</span></code>、および <code class="docutils literal"><span class="pre">None</span></code> が予約語になりました。(2.6 では既に <code class="docutils literal"><span class="pre">None</span></code> が部分的に制限されていました)</p>
</li>
<li><p class="first"><a class="reference internal" href="../reference/compound_stmts.html#except"><code class="xref std std-keyword docutils literal"><span class="pre">except</span></code></a> <em>exc</em>, <em>var</em> から <a class="reference internal" href="../reference/compound_stmts.html#except"><code class="xref std std-keyword docutils literal"><span class="pre">except</span></code></a> <em>exc</em> <a class="reference internal" href="../reference/compound_stmts.html#as"><code class="xref std std-keyword docutils literal"><span class="pre">as</span></code></a> <em>var</em> に変更されました。<span class="target" id="index-70"></span><a class="pep reference external" href="https://www.python.org/dev/peps/pep-3110"><strong>PEP 3110</strong></a> を参照してください。</p>
</li>
<li><p class="first"><span class="target" id="index-71"></span><a class="pep reference external" href="https://www.python.org/dev/peps/pep-3115"><strong>PEP 3115</strong></a>: 新たなメタクラスのシンタックス．以下の;</p>
<div class="highlight-python3"><div class="highlight"><pre><span class="k">class</span> <span class="nc">C</span><span class="p">:</span>
    <span class="n">__metaclass__</span> <span class="o">=</span> <span class="n">M</span>
    <span class="o">...</span>
</pre></div>
</div>
<p>代わりに次のようにしてください:</p>
<div class="highlight-python3"><div class="highlight"><pre><span class="k">class</span> <span class="nc">C</span><span class="p">(</span><span class="n">metaclass</span><span class="o">=</span><span class="n">M</span><span class="p">):</span>
    <span class="o">...</span>
</pre></div>
</div>
<p>The module-global <code class="xref py py-data docutils literal"><span class="pre">__metaclass__</span></code> variable is no longer
supported.  (It was a crutch to make it easier to default to
new-style classes without deriving every class from
<a class="reference internal" href="../library/functions.html#object" title="object"><code class="xref py py-class docutils literal"><span class="pre">object</span></code></a>.)</p>
</li>
<li><p class="first">リスト内包表記はもう <code class="samp docutils literal"><span class="pre">[...</span> <span class="pre">for</span> <em><span class="pre">var</span></em> <span class="pre">in</span> <em><span class="pre">item1</span></em><span class="pre">,</span> <em><span class="pre">item2</span></em><span class="pre">,</span> <span class="pre">...]</span></code> という構文形をサポートしません。代わりに <code class="samp docutils literal"><span class="pre">[...</span> <span class="pre">for</span> <em><span class="pre">var</span></em> <span class="pre">in</span> <span class="pre">(</span><em><span class="pre">item1</span></em><span class="pre">,</span> <em><span class="pre">item2</span></em><span class="pre">,</span> <span class="pre">...)]</span></code> を使用してください。また、リスト内包表記は異なるセマンティクスを持つことに注意してください。リスト内包表記は <a class="reference internal" href="../library/stdtypes.html#list" title="list"><code class="xref py py-func docutils literal"><span class="pre">list()</span></code></a> コンストラクタ内のジェネレータ式の糖衣構文に近く、特にループの制御変数はスコープ外ではもう使用することができません。</p>
</li>
<li><p class="first"><em>ellipsis</em> (<code class="docutils literal"><span class="pre">...</span></code>) はどこででも原子的な式として使うことが出来ます。
(以前はスライス内でのみ許されていました。)
また、<code class="docutils literal"><span class="pre">...</span></code> と書かなければ <em>ならなく</em> なりました。
(以前は文法の些細な偶然により <code class="docutils literal"><span class="pre">.</span> <span class="pre">.</span> <span class="pre">.</span></code> と書くことも出来ました。)</p>
</li>
</ul>
</div>
<div class="section" id="removed-syntax">
<h3>削除された操作<a class="headerlink" href="#removed-syntax" title="このヘッドラインへのパーマリンク">¶</a></h3>
<ul class="simple">
<li><p class="first"><span class="target" id="index-72"></span><a class="pep reference external" href="https://www.python.org/dev/peps/pep-3113"><strong>PEP 3113</strong></a>: タプル引数のアンパックが削除されました.  <code class="docutils literal"><span class="pre">def</span> <span class="pre">foo(a,</span> <span class="pre">(b,</span> <span class="pre">c)):</span> <span class="pre">...</span></code> のように書くことはできません。かわりに <code class="docutils literal"><span class="pre">def</span> <span class="pre">foo(a,</span> <span class="pre">b_c):</span> <span class="pre">b,</span> <span class="pre">c</span> <span class="pre">=</span> <span class="pre">b_c</span></code> を使用してください。</p>
</li>
<li><p class="first">バッククオートが削除されました (代わりに <a class="reference internal" href="../library/functions.html#repr" title="repr"><code class="xref py py-func docutils literal"><span class="pre">repr()</span></code></a> を使用してください)。</p>
</li>
<li><p class="first"><code class="docutils literal"><span class="pre">&lt;&gt;</span></code> が削除されました (代わりに <code class="docutils literal"><span class="pre">!=</span></code> を使用してください)。</p>
</li>
<li><p class="first">削除されたキーワード: <a class="reference internal" href="../library/functions.html#exec" title="exec"><code class="xref py py-func docutils literal"><span class="pre">exec()</span></code></a> はキーワードでなくなりましたが、関数として残りました。 (幸運にも関数のシンタックスは 2.x でも許容されています。)  また、 <a class="reference internal" href="../library/functions.html#exec" title="exec"><code class="xref py py-func docutils literal"><span class="pre">exec()</span></code></a> はストリーム引数を受け取らなくなりました。<code class="docutils literal"><span class="pre">exec(f)</span></code> の代わりに <code class="docutils literal"><span class="pre">exec(f.read())</span></code> を使うことができます。</p>
</li>
<li><p class="first"><code class="docutils literal"><span class="pre">l</span></code> または <code class="docutils literal"><span class="pre">L</span></code> で終わる整数リテラルはサポートされません。</p>
</li>
<li><p class="first"><code class="docutils literal"><span class="pre">u</span></code> or <code class="docutils literal"><span class="pre">U</span></code> で始まる文字列リテラルはサポートされません。</p>
</li>
<li><p class="first"><a class="reference internal" href="../reference/simple_stmts.html#from"><code class="xref std std-keyword docutils literal"><span class="pre">from</span></code></a> <em>module</em> <a class="reference internal" href="../reference/simple_stmts.html#import"><code class="xref std std-keyword docutils literal"><span class="pre">import</span></code></a> <code class="docutils literal"><span class="pre">*</span></code> はモジュールレベルでのみ許され、関数内での使用は許されません。</p>
</li>
<li><p class="first">相対インポートに許される構文は <code class="samp docutils literal"><span class="pre">from</span> <span class="pre">.[</span><em><span class="pre">module</span></em><span class="pre">]</span> <span class="pre">import</span> <em><span class="pre">name</span></em></code> のみです。
<code class="docutils literal"><span class="pre">.</span></code> で始まらない形の全ての <a class="reference internal" href="../reference/simple_stmts.html#import"><code class="xref std std-keyword docutils literal"><span class="pre">import</span></code></a> は絶対インポートと解釈されます。 (<span class="target" id="index-73"></span><a class="pep reference external" href="https://www.python.org/dev/peps/pep-0328"><strong>PEP 0328</strong></a>)</p>
</li>
<li><p class="first">古い形式のクラスはサポートされません。</p>
</li>
</ul>
</div>
</div>
<div class="section" id="changes-already-present-in-python-2-6">
<h2>Python 2.6 で既にあった変更<a class="headerlink" href="#changes-already-present-in-python-2-6" title="このヘッドラインへのパーマリンク">¶</a></h2>
<p>Since many users presumably make the jump straight from Python 2.5 to
Python 3.0, this section reminds the reader of new features that were
originally designed for Python 3.0 but that were back-ported to Python
2.6.  The corresponding sections in <a class="reference internal" href="2.6.html#whats-new-in-2-6"><span>What&#8217;s New in Python 2.6</span></a> should be
consulted for longer descriptions.</p>
<ul class="simple">
<li><a class="reference internal" href="2.6.html#pep-0343"><span>PEP 343: &#8220;with&#8221; ステートメント</span></a>.  The <a class="reference internal" href="../reference/compound_stmts.html#with"><code class="xref std std-keyword docutils literal"><span class="pre">with</span></code></a> statement is now a standard
feature and no longer needs to be imported from the <a class="reference internal" href="../library/__future__.html#module-__future__" title="__future__: Future statement definitions"><code class="xref py py-mod docutils literal"><span class="pre">__future__</span></code></a>.
Also check out <a class="reference internal" href="2.6.html#new-26-context-managers"><span>コンテキストマネージャを書く</span></a> and
<a class="reference internal" href="2.6.html#new-module-contextlib"><span>contextlib モジュール</span></a>.</li>
<li><a class="reference internal" href="2.6.html#pep-0366"><span>PEP 366: メインモジュールからの明示的相対インポート</span></a>.  This enhances the usefulness of the <a class="reference internal" href="../using/cmdline.html#cmdoption-m"><code class="xref std std-option docutils literal"><span class="pre">-m</span></code></a>
option when the referenced module lives in a package.</li>
<li><a class="reference internal" href="2.6.html#pep-0370"><span>PEP 370: ユーザごとの site-packages ディレクトリ</span></a>.</li>
<li><a class="reference internal" href="2.6.html#pep-0371"><span>PEP 371: multiprocessing パッケージ</span></a>.</li>
<li><a class="reference internal" href="2.6.html#pep-3101"><span>PEP 3101: 進化版文字列フォーマッティング</span></a>.  Note: the 2.6 description mentions the
<a class="reference internal" href="../library/functions.html#format" title="format"><code class="xref py py-meth docutils literal"><span class="pre">format()</span></code></a> method for both 8-bit and Unicode strings.  In 3.0,
only the <a class="reference internal" href="../library/stdtypes.html#str" title="str"><code class="xref py py-class docutils literal"><span class="pre">str</span></code></a> type (text strings with Unicode support)
supports this method; the <a class="reference internal" href="../library/functions.html#bytes" title="bytes"><code class="xref py py-class docutils literal"><span class="pre">bytes</span></code></a> type does not.  The plan is
to eventually make this the only API for string formatting, and to
start deprecating the <code class="docutils literal"><span class="pre">%</span></code> operator in Python 3.1.</li>
<li><a class="reference internal" href="2.6.html#pep-3105"><span>PEP 3105: print を関数にする</span></a>.  This is now a standard feature and no longer needs
to be imported from <a class="reference internal" href="../library/__future__.html#module-__future__" title="__future__: Future statement definitions"><code class="xref py py-mod docutils literal"><span class="pre">__future__</span></code></a>.  More details were given above.</li>
<li><a class="reference internal" href="2.6.html#pep-3110"><span>PEP 3110: 例外処理の変更</span></a>.  The <a class="reference internal" href="../reference/compound_stmts.html#except"><code class="xref std std-keyword docutils literal"><span class="pre">except</span></code></a> <em>exc</em> <a class="reference internal" href="../reference/compound_stmts.html#as"><code class="xref std std-keyword docutils literal"><span class="pre">as</span></code></a> <em>var</em>
syntax is now standard and <a class="reference internal" href="../reference/compound_stmts.html#except"><code class="xref std std-keyword docutils literal"><span class="pre">except</span></code></a> <em>exc</em>, <em>var</em> is no
longer supported.  (Of course, the <a class="reference internal" href="../reference/compound_stmts.html#as"><code class="xref std std-keyword docutils literal"><span class="pre">as</span></code></a> <em>var</em> part is still
optional.)</li>
<li><a class="reference internal" href="2.6.html#pep-3112"><span>PEP 3112: バイトリテラル</span></a>.  The <code class="docutils literal"><span class="pre">b&quot;...&quot;</span></code> string literal notation (and its
variants like <code class="docutils literal"><span class="pre">b'...'</span></code>, <code class="docutils literal"><span class="pre">b&quot;&quot;&quot;...&quot;&quot;&quot;</span></code>, and <code class="docutils literal"><span class="pre">br&quot;...&quot;</span></code>) now
produces a literal of type <a class="reference internal" href="../library/functions.html#bytes" title="bytes"><code class="xref py py-class docutils literal"><span class="pre">bytes</span></code></a>.</li>
<li><a class="reference internal" href="2.6.html#pep-3116"><span>PEP 3116: 新しい I/O ライブラリ</span></a>.  The <a class="reference internal" href="../library/io.html#module-io" title="io: Core tools for working with streams."><code class="xref py py-mod docutils literal"><span class="pre">io</span></code></a> module is now the standard way of
doing file I/O.  The built-in <a class="reference internal" href="../library/functions.html#open" title="open"><code class="xref py py-func docutils literal"><span class="pre">open()</span></code></a> function is now an
alias for <a class="reference internal" href="../library/io.html#io.open" title="io.open"><code class="xref py py-func docutils literal"><span class="pre">io.open()</span></code></a> and has additional keyword arguments
<em>encoding</em>, <em>errors</em>, <em>newline</em> and <em>closefd</em>.  Also note that an
invalid <em>mode</em> argument now raises <a class="reference internal" href="../library/exceptions.html#ValueError" title="ValueError"><code class="xref py py-exc docutils literal"><span class="pre">ValueError</span></code></a>, not
<a class="reference internal" href="../library/exceptions.html#IOError" title="IOError"><code class="xref py py-exc docutils literal"><span class="pre">IOError</span></code></a>.  The binary file object underlying a text file
object can be accessed as <code class="xref py py-attr docutils literal"><span class="pre">f.buffer</span></code> (but beware that the
text object maintains a buffer of itself in order to speed up
the encoding and decoding operations).</li>
<li><a class="reference internal" href="2.6.html#pep-3118"><span>PEP 3118: 改訂版バッファプロトコル</span></a>.  The old builtin <code class="xref py py-func docutils literal"><span class="pre">buffer()</span></code> is now really gone;
the new builtin <a class="reference internal" href="../library/stdtypes.html#memoryview" title="memoryview"><code class="xref py py-func docutils literal"><span class="pre">memoryview()</span></code></a> provides (mostly) similar
functionality.</li>
<li><a class="reference internal" href="2.6.html#pep-3119"><span>PEP 3119: 抽象基底クラス</span></a>.  The <a class="reference internal" href="../library/abc.html#module-abc" title="abc: Abstract base classes according to PEP 3119."><code class="xref py py-mod docutils literal"><span class="pre">abc</span></code></a> module and the ABCs defined in the
<a class="reference internal" href="../library/collections.html#module-collections" title="collections: Container datatypes"><code class="xref py py-mod docutils literal"><span class="pre">collections</span></code></a> module plays a somewhat more prominent role in
the language now, and built-in collection types like <a class="reference internal" href="../library/stdtypes.html#dict" title="dict"><code class="xref py py-class docutils literal"><span class="pre">dict</span></code></a>
and <a class="reference internal" href="../library/stdtypes.html#list" title="list"><code class="xref py py-class docutils literal"><span class="pre">list</span></code></a> conform to the <code class="xref py py-class docutils literal"><span class="pre">collections.MutableMapping</span></code>
and <code class="xref py py-class docutils literal"><span class="pre">collections.MutableSequence</span></code> ABCs, respectively.</li>
<li><a class="reference internal" href="2.6.html#pep-3127"><span>PEP 3127: 整数リテラルのサポートと文法</span></a>.  As mentioned above, the new octal literal
notation is the only one supported, and binary literals have been
added.</li>
<li><a class="reference internal" href="2.6.html#pep-3129"><span>PEP 3129: クラスデコレータ</span></a>.</li>
<li><a class="reference internal" href="2.6.html#pep-3141"><span>PEP 3141: 数値の型階層</span></a>.  The <a class="reference internal" href="../library/numbers.html#module-numbers" title="numbers: Numeric abstract base classes (Complex, Real, Integral, etc.)."><code class="xref py py-mod docutils literal"><span class="pre">numbers</span></code></a> module is another new use of
ABCs, defining Python&#8217;s &#8220;numeric tower&#8221;.  Also note the new
<a class="reference internal" href="../library/fractions.html#module-fractions" title="fractions: Rational numbers."><code class="xref py py-mod docutils literal"><span class="pre">fractions</span></code></a> module which implements <a class="reference internal" href="../library/numbers.html#numbers.Rational" title="numbers.Rational"><code class="xref py py-class docutils literal"><span class="pre">numbers.Rational</span></code></a>.</li>
</ul>
</div>
<div class="section" id="library-changes">
<h2>ライブラリの変更<a class="headerlink" href="#library-changes" title="このヘッドラインへのパーマリンク">¶</a></h2>
<p>時間の制約により、この文書は標準ライブラリの非常に幅広い変更について徹底的に取り上げてはいません。
ライブラリの大きな変更については <span class="target" id="index-74"></span><a class="pep reference external" href="https://www.python.org/dev/peps/pep-3108"><strong>PEP 3108</strong></a> を参照してください。
ここでは要約を示します:</p>
<ul>
<li><p class="first">多くの古いモジュールは削除されました。
<code class="xref py py-mod docutils literal"><span class="pre">gopherlib</span></code> (もう使われません) や <code class="xref py py-mod docutils literal"><span class="pre">md5</span></code> (<a class="reference internal" href="../library/hashlib.html#module-hashlib" title="hashlib: Secure hash and message digest algorithms."><code class="xref py py-mod docutils literal"><span class="pre">hashlib</span></code></a> に代替されました) 等のいくつかのモジュールは <span class="target" id="index-75"></span><a class="pep reference external" href="https://www.python.org/dev/peps/pep-0004"><strong>PEP 0004</strong></a> で既に廃止予定でした。
他のモジュールは、Irix、BeOS ならびに Mac OS 9 等のプラットフォームでのサポートが打ち切られた (<span class="target" id="index-76"></span><a class="pep reference external" href="https://www.python.org/dev/peps/pep-0011"><strong>PEP 0011</strong></a> 参照) ために削除されました。
いくつかのモジュールは使われなかったり、より良い代用品があるため Python 3.0 で削除されました
網羅的なリストは <span class="target" id="index-77"></span><a class="pep reference external" href="https://www.python.org/dev/peps/pep-3108"><strong>PEP 3108</strong></a> を参照してください。</p>
</li>
<li><p class="first"><code class="xref py py-mod docutils literal"><span class="pre">bsddb3</span></code> パッケージが削除されたのは、テストの不安定性と Berkeley DB のリリーススケジュールにより、中心標準ライブラリでの存在が中心開発者の大きな負担になっていることが徐々に分かってきたためです。
しかしながら <code class="xref py py-mod docutils literal"><span class="pre">bsddb3</span></code> パッケージは健在で、<a class="reference external" href="http://www.jcea.es/programacion/pybsddb.htm">http://www.jcea.es/programacion/pybsddb.htm</a> で外部的に保守されています。</p>
</li>
<li><p class="first">いくつかのモジュールは <span class="target" id="index-78"></span><a class="pep reference external" href="https://www.python.org/dev/peps/pep-0008"><strong>PEP 0008</strong></a> に従っていないか、その他の理由により名前が変更されました:</p>
<table border="1" class="docutils">
<colgroup>
<col width="50%" />
<col width="50%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head"><p class="first last">古い名前</p>
</th>
<th class="head"><p class="first last">新しい名前</p>
</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>_winreg</td>
<td>winreg</td>
</tr>
<tr class="row-odd"><td>ConfigParser</td>
<td>configparser</td>
</tr>
<tr class="row-even"><td>copy_reg</td>
<td>copyreg</td>
</tr>
<tr class="row-odd"><td>Queue</td>
<td>queue</td>
</tr>
<tr class="row-even"><td>SocketServer</td>
<td>socketserver</td>
</tr>
<tr class="row-odd"><td>markupbase</td>
<td>_markupbase</td>
</tr>
<tr class="row-even"><td>repr</td>
<td>reprlib</td>
</tr>
<tr class="row-odd"><td>test.test_support</td>
<td>test.support</td>
</tr>
</tbody>
</table>
</li>
<li><p class="first">A common pattern in Python 2.x is to have one version of a module
implemented in pure Python, with an optional accelerated version
implemented as a C extension; for example, <a class="reference internal" href="../library/pickle.html#module-pickle" title="pickle: Convert Python objects to streams of bytes and back."><code class="xref py py-mod docutils literal"><span class="pre">pickle</span></code></a> and
<code class="xref py py-mod docutils literal"><span class="pre">cPickle</span></code>.  This places the burden of importing the accelerated
version and falling back on the pure Python version on each user of
these modules.  In Python 3.0, the accelerated versions are
considered implementation details of the pure Python versions.
Users should always import the standard version, which attempts to
import the accelerated version and falls back to the pure Python
version.  The <a class="reference internal" href="../library/pickle.html#module-pickle" title="pickle: Convert Python objects to streams of bytes and back."><code class="xref py py-mod docutils literal"><span class="pre">pickle</span></code></a> / <code class="xref py py-mod docutils literal"><span class="pre">cPickle</span></code> pair received this
treatment.  The <a class="reference internal" href="../library/profile.html#module-profile" title="profile: Python source profiler."><code class="xref py py-mod docutils literal"><span class="pre">profile</span></code></a> module is on the list for 3.1.  The
<code class="xref py py-mod docutils literal"><span class="pre">StringIO</span></code> module has been turned into a class in the <a class="reference internal" href="../library/io.html#module-io" title="io: Core tools for working with streams."><code class="xref py py-mod docutils literal"><span class="pre">io</span></code></a>
module.</p>
</li>
<li><p class="first">関連のあるモジュールのいくつかはパッケージにまとめられ、ふつうサブモジュール名は単純化されました。結果として以下のようなパッケージが出来ました:</p>
<ul class="simple">
<li><p class="first"><a class="reference internal" href="../library/dbm.html#module-dbm" title="dbm: Interfaces to various Unix &quot;database&quot; formats."><code class="xref py py-mod docutils literal"><span class="pre">dbm</span></code></a> (<code class="xref py py-mod docutils literal"><span class="pre">anydbm</span></code>, <code class="xref py py-mod docutils literal"><span class="pre">dbhash</span></code>, <a class="reference internal" href="../library/dbm.html#module-dbm" title="dbm: Interfaces to various Unix &quot;database&quot; formats."><code class="xref py py-mod docutils literal"><span class="pre">dbm</span></code></a>, <code class="xref py py-mod docutils literal"><span class="pre">dumbdbm</span></code>, <code class="xref py py-mod docutils literal"><span class="pre">gdbm</span></code>, <code class="xref py py-mod docutils literal"><span class="pre">whichdb</span></code>)。</p>
</li>
<li><p class="first"><a class="reference internal" href="../library/html.html#module-html" title="html: Helpers for manipulating HTML."><code class="xref py py-mod docutils literal"><span class="pre">html</span></code></a> (<code class="xref py py-mod docutils literal"><span class="pre">HTMLParser</span></code>, <code class="xref py py-mod docutils literal"><span class="pre">htmlentitydefs</span></code>)。</p>
</li>
<li><p class="first"><code class="xref py py-mod docutils literal"><span class="pre">http</span></code> (<code class="xref py py-mod docutils literal"><span class="pre">httplib</span></code>, <code class="xref py py-mod docutils literal"><span class="pre">BaseHTTPServer</span></code>, <code class="xref py py-mod docutils literal"><span class="pre">CGIHTTPServer</span></code>, <code class="xref py py-mod docutils literal"><span class="pre">SimpleHTTPServer</span></code>, <code class="xref py py-mod docutils literal"><span class="pre">Cookie</span></code>, <code class="xref py py-mod docutils literal"><span class="pre">cookielib</span></code>)。</p>
</li>
<li><p class="first"><a class="reference internal" href="../library/tkinter.html#module-tkinter" title="tkinter: Interface to Tcl/Tk for graphical user interfaces"><code class="xref py py-mod docutils literal"><span class="pre">tkinter</span></code></a> (<a class="reference internal" href="../library/turtle.html#module-turtle" title="turtle: An educational framework for simple graphics applications"><code class="xref py py-mod docutils literal"><span class="pre">turtle</span></code></a> を除く全ての <code class="xref py py-mod docutils literal"><span class="pre">Tkinter</span></code> 関連のモジュール)。
<a class="reference internal" href="../library/turtle.html#module-turtle" title="turtle: An educational framework for simple graphics applications"><code class="xref py py-mod docutils literal"><span class="pre">turtle</span></code></a> の対象読者は <a class="reference internal" href="../library/tkinter.html#module-tkinter" title="tkinter: Interface to Tcl/Tk for graphical user interfaces"><code class="xref py py-mod docutils literal"><span class="pre">tkinter</span></code></a> にそれほど関心がありません。
また、Python 2.6 以降では <a class="reference internal" href="../library/turtle.html#module-turtle" title="turtle: An educational framework for simple graphics applications"><code class="xref py py-mod docutils literal"><span class="pre">turtle</span></code></a> の機能は大幅に向上しました。</p>
</li>
<li><p class="first"><a class="reference internal" href="../library/urllib.html#module-urllib" title="urllib"><code class="xref py py-mod docutils literal"><span class="pre">urllib</span></code></a> (<a class="reference internal" href="../library/urllib.html#module-urllib" title="urllib"><code class="xref py py-mod docutils literal"><span class="pre">urllib</span></code></a>, <code class="xref py py-mod docutils literal"><span class="pre">urllib2</span></code>, <code class="xref py py-mod docutils literal"><span class="pre">urlparse</span></code>, <code class="xref py py-mod docutils literal"><span class="pre">robotparse</span></code>)。</p>
</li>
<li><p class="first"><code class="xref py py-mod docutils literal"><span class="pre">xmlrpc</span></code> (<code class="xref py py-mod docutils literal"><span class="pre">xmlrpclib</span></code>, <code class="xref py py-mod docutils literal"><span class="pre">DocXMLRPCServer</span></code>, <code class="xref py py-mod docutils literal"><span class="pre">SimpleXMLRPCServer</span></code>)。</p>
</li>
</ul>
</li>
</ul>
<p><span class="target" id="index-79"></span><a class="pep reference external" href="https://www.python.org/dev/peps/pep-3108"><strong>PEP 3108</strong></a> で取り上げられていない標準ライブラリーの他の変更:</p>
<ul class="simple">
<li><p class="first"><code class="xref py py-mod docutils literal"><span class="pre">sets</span></code> は廃止されました。組み込みの <a class="reference internal" href="../library/stdtypes.html#set" title="set"><code class="xref py py-func docutils literal"><span class="pre">set()</span></code></a> クラスを使用してください。</p>
</li>
<li><p class="first"><a class="reference internal" href="../library/sys.html#module-sys" title="sys: Access system-specific parameters and functions."><code class="xref py py-mod docutils literal"><span class="pre">sys</span></code></a> モジュールの整理: <code class="xref py py-func docutils literal"><span class="pre">sys.exitfunc()</span></code>, <code class="xref py py-func docutils literal"><span class="pre">sys.exc_clear()</span></code>, <code class="xref py py-data docutils literal"><span class="pre">sys.exc_type</span></code>, <code class="xref py py-data docutils literal"><span class="pre">sys.exc_value</span></code>, <code class="xref py py-data docutils literal"><span class="pre">sys.exc_traceback</span></code> は削除されました。(<a class="reference internal" href="../library/sys.html#sys.last_type" title="sys.last_type"><code class="xref py py-data docutils literal"><span class="pre">sys.last_type</span></code></a> 等はまだあります。)</p>
</li>
<li><p class="first"><a class="reference internal" href="../library/array.html#array.array" title="array.array"><code class="xref py py-class docutils literal"><span class="pre">array.array</span></code></a> 型の整理: <code class="xref py py-meth docutils literal"><span class="pre">read()</span></code> ならびに <code class="xref py py-meth docutils literal"><span class="pre">write()</span></code> メソッドは廃止されました。代わりに <code class="xref py py-meth docutils literal"><span class="pre">fromfile()</span></code> ならびに <code class="xref py py-meth docutils literal"><span class="pre">tofile()</span></code> を使用してください。また、array 向けの <code class="docutils literal"><span class="pre">'c'</span></code> タイプコードは廃止されました。バイトには <code class="docutils literal"><span class="pre">'b'</span></code> 、ユニコード文字には <code class="docutils literal"><span class="pre">'u'</span></code> を使用してください。</p>
</li>
<li><p class="first"><a class="reference internal" href="../library/operator.html#module-operator" title="operator: Functions corresponding to the standard operators."><code class="xref py py-mod docutils literal"><span class="pre">operator</span></code></a> モジュールの整理: <code class="xref py py-func docutils literal"><span class="pre">sequenceIncludes()</span></code> および <code class="xref py py-func docutils literal"><span class="pre">isCallable()</span></code> は削除されました。</p>
</li>
<li><p class="first"><code class="xref py py-mod docutils literal"><span class="pre">thread</span></code> モジュールの整理: <code class="xref py py-func docutils literal"><span class="pre">acquire_lock()</span></code> ならびに <code class="xref py py-func docutils literal"><span class="pre">release_lock()</span></code> は廃止されました。代わりに <code class="xref py py-func docutils literal"><span class="pre">acquire()</span></code> ならびに <code class="xref py py-func docutils literal"><span class="pre">release()</span></code> を使用してください。</p>
</li>
<li><p class="first"><a class="reference internal" href="../library/random.html#module-random" title="random: Generate pseudo-random numbers with various common distributions."><code class="xref py py-mod docutils literal"><span class="pre">random</span></code></a> モジュールの整理: <code class="xref py py-func docutils literal"><span class="pre">jumpahead()</span></code> API は削除されました。</p>
</li>
<li><p class="first"><code class="xref py py-mod docutils literal"><span class="pre">new</span></code> モジュールは廃止されました。</p>
</li>
<li><p class="first">関数 <code class="xref py py-func docutils literal"><span class="pre">os.tmpnam()</span></code>、<code class="xref py py-func docutils literal"><span class="pre">os.tempnam()</span></code> および <code class="xref py py-func docutils literal"><span class="pre">os.tmpfile()</span></code> は <a class="reference internal" href="../library/tempfile.html#module-tempfile" title="tempfile: Generate temporary files and directories."><code class="xref py py-mod docutils literal"><span class="pre">tempfile</span></code></a> のため削除されました。</p>
</li>
<li><p class="first"><a class="reference internal" href="../library/tokenize.html#module-tokenize" title="tokenize: Lexical scanner for Python source code."><code class="xref py py-mod docutils literal"><span class="pre">tokenize</span></code></a> モジュールはバイトでも機能するように変更されました。
主な入口は generate_tokens から <a class="reference internal" href="../library/tokenize.html#tokenize.tokenize" title="tokenize.tokenize"><code class="xref py py-func docutils literal"><span class="pre">tokenize.tokenize()</span></code></a> になりました。</p>
</li>
<li><p class="first"><code class="xref py py-data docutils literal"><span class="pre">string.letters</span></code> とその仲間 (<code class="xref py py-data docutils literal"><span class="pre">string.lowercase</span></code> と <code class="xref py py-data docutils literal"><span class="pre">string.uppercase</span></code>) は廃止されました。
代わりに <a class="reference internal" href="../library/string.html#string.ascii_letters" title="string.ascii_letters"><code class="xref py py-data docutils literal"><span class="pre">string.ascii_letters</span></code></a> 等を使用してください。
(削除された理由は <code class="xref py py-data docutils literal"><span class="pre">string.letters</span></code> とその仲間にロケール固有の挙動があったためです。美しい方法で名付けられた大域 &#8220;変数&#8221; には良くないのです。)</p>
</li>
<li><p class="first">モジュール <code class="xref py py-mod docutils literal"><span class="pre">__builtin__</span></code> が <a class="reference internal" href="../library/builtins.html#module-builtins" title="builtins: The module that provides the built-in namespace."><code class="xref py py-mod docutils literal"><span class="pre">builtins</span></code></a> にリネームされました (アンダースコアの削除と &#8216;s&#8217; の追加)。
大半の大域名前空間における <code class="xref py py-data docutils literal"><span class="pre">__builtins__</span></code> 変数は変更されていません。
組み込みを変更するには <code class="xref py py-data docutils literal"><span class="pre">__builtins__</span></code> でなく <a class="reference internal" href="../library/builtins.html#module-builtins" title="builtins: The module that provides the built-in namespace."><code class="xref py py-mod docutils literal"><span class="pre">builtins</span></code></a> を使わなければなりません。</p>
</li>
</ul>
</div>
<div class="section" id="pep-3101-a-new-approach-to-string-formatting">
<h2><span class="target" id="index-53"></span><a class="pep reference external" href="https://www.python.org/dev/peps/pep-3101"><strong>PEP 3101</strong></a>: 文字列成型の新たなアプローチ<a class="headerlink" href="#pep-3101-a-new-approach-to-string-formatting" title="このヘッドラインへのパーマリンク">¶</a></h2>
<ul class="simple">
<li>A new system for  built-in string formatting operations replaces the
<code class="docutils literal"><span class="pre">%</span></code> string  formatting operator.   (However, the <code class="docutils literal"><span class="pre">%</span></code>  operator is
still supported;  it will  be deprecated in  Python 3.1  and removed
from the language at some later time.)  Read <span class="target" id="index-24"></span><a class="pep reference external" href="https://www.python.org/dev/peps/pep-3101"><strong>PEP 3101</strong></a> for the full
scoop.</li>
</ul>
</div>
<div class="section" id="changes-to-exceptions">
<h2>例外に関する変更<a class="headerlink" href="#changes-to-exceptions" title="このヘッドラインへのパーマリンク">¶</a></h2>
<p>例外の送出や捕捉を行う API は整理され、 強力な新機能が追加されました:</p>
<ul>
<li><p class="first"><span class="target" id="index-80"></span><a class="pep reference external" href="https://www.python.org/dev/peps/pep-0352"><strong>PEP 0352</strong></a>: 全ての例外は (直接的にまたは間接的に) <a class="reference internal" href="../library/exceptions.html#BaseException" title="BaseException"><code class="xref py py-exc docutils literal"><span class="pre">BaseException</span></code></a> を継承しなければなりません。
<a class="reference internal" href="../library/exceptions.html#BaseException" title="BaseException"><code class="xref py py-exc docutils literal"><span class="pre">BaseException</span></code></a> は例外階層の根です。
これは勧告としては新しくありませんが、<a class="reference internal" href="../library/exceptions.html#BaseException" title="BaseException"><code class="xref py py-exc docutils literal"><span class="pre">BaseException</span></code></a> 継承の <em>要求</em> は新しいです。
(Python 2.6 は依然として昔のクラスを送出するのを許容しており、捕捉するものについての制限はありません。)
結果として文字列例外は終に本当の意味で、完全になくなりました。</p>
</li>
<li><p class="first">ほとんど全ての例外は、実際は <a class="reference internal" href="../library/exceptions.html#Exception" title="Exception"><code class="xref py py-exc docutils literal"><span class="pre">Exception</span></code></a> を継承すべきです。 :<cite>BaseException</cite> は最上位で扱われるべき例外、例えば <a class="reference internal" href="../library/exceptions.html#SystemExit" title="SystemExit"><code class="xref py py-exc docutils literal"><span class="pre">SystemExit</span></code></a> や「 <a class="reference internal" href="../library/exceptions.html#KeyboardInterrupt" title="KeyboardInterrupt"><code class="xref py py-exc docutils literal"><span class="pre">KeyboardInterrupt</span></code></a>、の基底クラスとしてのみ使われるべきでしす。
上記カテゴリーを除く全ての例外を処理するのに推奨されるイディオムは <a class="reference internal" href="../reference/compound_stmts.html#except"><code class="xref std std-keyword docutils literal"><span class="pre">except</span></code></a> <a class="reference internal" href="../library/exceptions.html#Exception" title="Exception"><code class="xref py py-exc docutils literal"><span class="pre">Exception</span></code></a> です。</p>
</li>
<li><p class="first"><code class="xref py py-exc docutils literal"><span class="pre">StandardError</span></code> は削除されました。</p>
</li>
<li><p class="first">例外はシークエンスとして振る舞わなくなりました。代わりに <code class="xref py py-attr docutils literal"><span class="pre">args</span></code> 属性を使用してください。</p>
</li>
<li><p class="first"><span class="target" id="index-81"></span><a class="pep reference external" href="https://www.python.org/dev/peps/pep-3109"><strong>PEP 3109</strong></a>: 例外の送出。
<code class="samp docutils literal"><span class="pre">raise</span> <em><span class="pre">Exception</span></em><span class="pre">,</span> <em><span class="pre">args</span></em></code> ではなく <code class="samp docutils literal"><span class="pre">raise</span> <em><span class="pre">Exception</span></em><span class="pre">(</span><em><span class="pre">args</span></em><span class="pre">)</span></code> としなければなりません。
加えて、トレースバックを明示的に指定することはもう出来ません。
そう <em>しなければならない</em> 場合は、代わりに <code class="xref py py-attr docutils literal"><span class="pre">__traceback__</span></code> 属性に直接割り当てることが出来ます (下記参照).</p>
</li>
<li><p class="first"><span class="target" id="index-82"></span><a class="pep reference external" href="https://www.python.org/dev/peps/pep-3110"><strong>PEP 3110</strong></a>: 例外の捕捉。
<code class="samp docutils literal"><span class="pre">except</span> <em><span class="pre">SomeException</span></em><span class="pre">,</span> <em><span class="pre">variable</span></em></code> ではなく <code class="samp docutils literal"><span class="pre">except</span> <em><span class="pre">SomeException</span></em> <span class="pre">as</span> <em><span class="pre">variable</span></em></code> としなければなりません。
その上 <a class="reference internal" href="../reference/compound_stmts.html#except"><code class="xref std std-keyword docutils literal"><span class="pre">except</span></code></a> ブロックがある場合 <em>variable</em> は明示的に削除されます。</p>
</li>
<li><p class="first"><span class="target" id="index-83"></span><a class="pep reference external" href="https://www.python.org/dev/peps/pep-3134"><strong>PEP 3134</strong></a>: 例外の連鎖。
暗黙の連鎖と明示的な連鎖の2つの場合があります。
暗黙の連鎖は例外が <a class="reference internal" href="../reference/compound_stmts.html#except"><code class="xref std std-keyword docutils literal"><span class="pre">except</span></code></a> や <a class="reference internal" href="../reference/compound_stmts.html#finally"><code class="xref std std-keyword docutils literal"><span class="pre">finally</span></code></a> 処理ブロックで創出されたときに起こります。
この原因は大抵処理ブロック内のバグです。
これを <em>二次的な (secondary)</em> 例外と呼びます。
この場合 (処理中の) 元々の例外は二次的な例外の <code class="xref py py-attr docutils literal"><span class="pre">__context__</span></code> 属性に保存されます。
明示的な連鎖は以下の構文で起こします:</p>
<div class="highlight-python3"><div class="highlight"><pre><span class="k">raise</span> <span class="n">SecondaryException</span><span class="p">()</span> <span class="kn">from</span> <span class="nn">primary_exception</span>
</pre></div>
</div>
<p>(where <em>primary_exception</em> is any expression that produces an
exception object, probably an exception that was previously caught).
In this case, the primary exception is stored on the
<code class="xref py py-attr docutils literal"><span class="pre">__cause__</span></code> attribute of the secondary exception.  The
traceback printed when an unhandled exception occurs walks the chain
of <code class="xref py py-attr docutils literal"><span class="pre">__cause__</span></code> and <code class="xref py py-attr docutils literal"><span class="pre">__context__</span></code> attributes and prints a
separate traceback for each component of the chain, with the primary
exception at the top.  (Java users may recognize this behavior.)</p>
</li>
<li><p class="first"><span class="target" id="index-84"></span><a class="pep reference external" href="https://www.python.org/dev/peps/pep-3134"><strong>PEP 3134</strong></a>: 例外オブジェクトがトレースバックを <code class="xref py py-attr docutils literal"><span class="pre">__traceback__</span></code> 属性に格納するようになりました。
つまり、例外オブジェクトが例外関連の全情報を持つようになったということです。
<a class="reference internal" href="../library/sys.html#sys.exc_info" title="sys.exc_info"><code class="xref py py-func docutils literal"><span class="pre">sys.exc_info()</span></code></a> を使う理由は (削除されていませんが) あまりありません。</p>
</li>
<li><p class="first">Windows が拡張モジュールのロードに失敗したときの例外メッセージが少し改善しました。
例えば、<code class="docutils literal"><span class="pre">error</span> <span class="pre">code</span> <span class="pre">193</span></code> は <code class="docutils literal"><span class="pre">%1</span> <span class="pre">is</span> <span class="pre">not</span> <span class="pre">a</span> <span class="pre">valid</span> <span class="pre">Win32</span> <span class="pre">application</span></code> になりました。
文字列は英語でないロケールを扱えるようになりました。</p>
</li>
</ul>
</div>
<div class="section" id="miscellaneous-other-changes">
<h2>その他の変更<a class="headerlink" href="#miscellaneous-other-changes" title="このヘッドラインへのパーマリンク">¶</a></h2>
<div class="section" id="operators-and-special-methods">
<h3>演算子と特殊メソッド<a class="headerlink" href="#operators-and-special-methods" title="このヘッドラインへのパーマリンク">¶</a></h3>
<ul class="simple">
<li><p class="first"><code class="docutils literal"><span class="pre">!=</span></code> は <code class="docutils literal"><span class="pre">==</span></code> と逆の結果をかえします（<code class="docutils literal"><span class="pre">==</span></code> が <a class="reference internal" href="../library/constants.html#NotImplemented" title="NotImplemented"><code class="xref py py-data docutils literal"><span class="pre">NotImplemented</span></code></a> を返さなければ）。</p>
</li>
<li>The concept of &#8220;unbound methods&#8221; has been removed from the language.
When referencing a method as a class attribute, you now get a plain
function object.</li>
<li><code class="xref py py-meth docutils literal"><span class="pre">__getslice__()</span></code>, <code class="xref py py-meth docutils literal"><span class="pre">__setslice__()</span></code> and <code class="xref py py-meth docutils literal"><span class="pre">__delslice__()</span></code>
were killed.  The syntax <code class="docutils literal"><span class="pre">a[i:j]</span></code> now translates to
<code class="docutils literal"><span class="pre">a.__getitem__(slice(i,</span> <span class="pre">j))</span></code> (or <a class="reference internal" href="../reference/datamodel.html#object.__setitem__" title="object.__setitem__"><code class="xref py py-meth docutils literal"><span class="pre">__setitem__()</span></code></a> or
<a class="reference internal" href="../reference/datamodel.html#object.__delitem__" title="object.__delitem__"><code class="xref py py-meth docutils literal"><span class="pre">__delitem__()</span></code></a>, when used as an assignment or deletion target,
respectively).</li>
<li><p class="first"><span class="target" id="index-85"></span><a class="pep reference external" href="https://www.python.org/dev/peps/pep-3114"><strong>PEP 3114</strong></a>:  <a class="reference internal" href="../library/functions.html#next" title="next"><code class="xref py py-meth docutils literal"><span class="pre">next()</span></code></a> 標準メソッドは <a class="reference internal" href="../library/stdtypes.html#iterator.__next__" title="iterator.__next__"><code class="xref py py-meth docutils literal"><span class="pre">__next__()</span></code></a> に改名されました。</p>
</li>
<li><p class="first"><code class="xref py py-meth docutils literal"><span class="pre">__oct__()</span></code> ならびに <code class="xref py py-meth docutils literal"><span class="pre">__hex__()</span></code> 特殊メソッドは削除されました。
<a class="reference internal" href="../library/functions.html#oct" title="oct"><code class="xref py py-func docutils literal"><span class="pre">oct()</span></code></a> ならびに <a class="reference internal" href="../library/functions.html#hex" title="hex"><code class="xref py py-func docutils literal"><span class="pre">hex()</span></code></a> は <a class="reference internal" href="../reference/datamodel.html#object.__index__" title="object.__index__"><code class="xref py py-meth docutils literal"><span class="pre">__index__()</span></code></a> を使って引数を整数に変換します。</p>
</li>
<li><p class="first"><code class="xref py py-attr docutils literal"><span class="pre">__members__</span></code> と <code class="xref py py-attr docutils literal"><span class="pre">__methods__</span></code> は削除されました。</p>
</li>
<li>The function attributes named <code class="xref py py-attr docutils literal"><span class="pre">func_X</span></code> have been renamed to
use the <code class="xref py py-data docutils literal"><span class="pre">__X__</span></code> form, freeing up these names in the function
attribute namespace for user-defined attributes.  To wit,
<code class="xref py py-attr docutils literal"><span class="pre">func_closure</span></code>, <code class="xref py py-attr docutils literal"><span class="pre">func_code</span></code>, <code class="xref py py-attr docutils literal"><span class="pre">func_defaults</span></code>,
<code class="xref py py-attr docutils literal"><span class="pre">func_dict</span></code>, <code class="xref py py-attr docutils literal"><span class="pre">func_doc</span></code>, <code class="xref py py-attr docutils literal"><span class="pre">func_globals</span></code>,
<code class="xref py py-attr docutils literal"><span class="pre">func_name</span></code> were renamed to <code class="xref py py-attr docutils literal"><span class="pre">__closure__</span></code>,
<code class="xref py py-attr docutils literal"><span class="pre">__code__</span></code>, <code class="xref py py-attr docutils literal"><span class="pre">__defaults__</span></code>, <code class="xref py py-attr docutils literal"><span class="pre">__dict__</span></code>,
<code class="xref py py-attr docutils literal"><span class="pre">__doc__</span></code>, <code class="xref py py-attr docutils literal"><span class="pre">__globals__</span></code>, <a class="reference internal" href="../reference/import.html#__name__" title="__name__"><code class="xref py py-attr docutils literal"><span class="pre">__name__</span></code></a>,
respectively.</li>
<li><p class="first"><code class="xref py py-meth docutils literal"><span class="pre">__nonzero__()</span></code> は <a class="reference internal" href="../reference/datamodel.html#object.__bool__" title="object.__bool__"><code class="xref py py-meth docutils literal"><span class="pre">__bool__()</span></code></a> に改名されました。</p>
</li>
</ul>
</div>
<div class="section" id="builtins">
<h3>組み込み<a class="headerlink" href="#builtins" title="このヘッドラインへのパーマリンク">¶</a></h3>
<ul class="simple">
<li><span class="target" id="index-31"></span><a class="pep reference external" href="https://www.python.org/dev/peps/pep-3135"><strong>PEP 3135</strong></a>: New <a class="reference internal" href="../library/functions.html#super" title="super"><code class="xref py py-func docutils literal"><span class="pre">super()</span></code></a>.  You can now invoke <a class="reference internal" href="../library/functions.html#super" title="super"><code class="xref py py-func docutils literal"><span class="pre">super()</span></code></a>
without arguments and (assuming this is in a regular instance method
defined inside a <a class="reference internal" href="../reference/compound_stmts.html#class"><code class="xref std std-keyword docutils literal"><span class="pre">class</span></code></a> statement) the right class and
instance will automatically be chosen.  With arguments, the behavior
of <a class="reference internal" href="../library/functions.html#super" title="super"><code class="xref py py-func docutils literal"><span class="pre">super()</span></code></a> is unchanged.</li>
<li><span class="target" id="index-32"></span><a class="pep reference external" href="https://www.python.org/dev/peps/pep-3111"><strong>PEP 3111</strong></a>: <code class="xref py py-func docutils literal"><span class="pre">raw_input()</span></code> was renamed to <a class="reference internal" href="../library/functions.html#input" title="input"><code class="xref py py-func docutils literal"><span class="pre">input()</span></code></a>.  That
is, the new <a class="reference internal" href="../library/functions.html#input" title="input"><code class="xref py py-func docutils literal"><span class="pre">input()</span></code></a> function reads a line from
<a class="reference internal" href="../library/sys.html#sys.stdin" title="sys.stdin"><code class="xref py py-data docutils literal"><span class="pre">sys.stdin</span></code></a> and returns it with the trailing newline stripped.
It raises <a class="reference internal" href="../library/exceptions.html#EOFError" title="EOFError"><code class="xref py py-exc docutils literal"><span class="pre">EOFError</span></code></a> if the input is terminated prematurely.
To get the old behavior of <a class="reference internal" href="../library/functions.html#input" title="input"><code class="xref py py-func docutils literal"><span class="pre">input()</span></code></a>, use <code class="docutils literal"><span class="pre">eval(input())</span></code>.</li>
<li><p class="first">新しい組み込み関数 <a class="reference internal" href="../library/functions.html#next" title="next"><code class="xref py py-func docutils literal"><span class="pre">next()</span></code></a> が追加されました。 オブジェクトの <a class="reference internal" href="../library/stdtypes.html#iterator.__next__" title="iterator.__next__"><code class="xref py py-meth docutils literal"><span class="pre">__next__()</span></code></a> メソッドを呼び出します。</p>
</li>
<li>The <a class="reference internal" href="../library/functions.html#round" title="round"><code class="xref py py-func docutils literal"><span class="pre">round()</span></code></a> function rounding strategy and return type have
changed.  Exact halfway cases are now rounded to the nearest even
result instead of away from zero.  (For example, <code class="docutils literal"><span class="pre">round(2.5)</span></code> now
returns <code class="docutils literal"><span class="pre">2</span></code> rather than <code class="docutils literal"><span class="pre">3</span></code>.)  <code class="docutils literal"><span class="pre">round(x[,</span> <span class="pre">n])</span></code> now
delegates to <code class="docutils literal"><span class="pre">x.__round__([n])</span></code> instead of always returning a
float.  It generally returns an integer when called with a single
argument and a value of the same type as <code class="docutils literal"><span class="pre">x</span></code> when called with two
arguments.</li>
<li><p class="first"><code class="xref py py-func docutils literal"><span class="pre">intern()</span></code> は <a class="reference internal" href="../library/sys.html#sys.intern" title="sys.intern"><code class="xref py py-func docutils literal"><span class="pre">sys.intern()</span></code></a> に移動しました。</p>
</li>
<li><p class="first"><code class="xref py py-func docutils literal"><span class="pre">apply()</span></code> は削除されました。 <code class="docutils literal"><span class="pre">apply(f,</span> <span class="pre">args)</span></code> の代わりに <code class="docutils literal"><span class="pre">f(*args)</span></code> を使用してください。</p>
</li>
<li><p class="first"><a class="reference internal" href="../library/functions.html#callable" title="callable"><code class="xref py py-func docutils literal"><span class="pre">callable()</span></code></a> は削除されました。 <code class="docutils literal"><span class="pre">callable(f)</span></code> のかわりに <code class="docutils literal"><span class="pre">isinstance(f,</span> <span class="pre">collections.Callable)</span></code> を使用してください。 <code class="xref py py-func docutils literal"><span class="pre">operator.isCallable()</span></code> も削除されました。</p>
</li>
<li><p class="first"><code class="xref py py-func docutils literal"><span class="pre">coerce()</span></code> は削除されました。古い形式のクラスが削除されたため、この関数は必要ありません。</p>
</li>
<li><p class="first"><code class="xref py py-func docutils literal"><span class="pre">execfile()</span></code> は削除されました。 <code class="docutils literal"><span class="pre">execfile(fn)</span></code> の代わりに <code class="docutils literal"><span class="pre">exec(open(fn).read())</span></code> を使用してください。</p>
</li>
<li>Removed the <code class="xref py py-class docutils literal"><span class="pre">file</span></code> type.  Use <a class="reference internal" href="../library/functions.html#open" title="open"><code class="xref py py-func docutils literal"><span class="pre">open()</span></code></a>.  There are now several
different kinds of streams that open can return in the <a class="reference internal" href="../library/io.html#module-io" title="io: Core tools for working with streams."><code class="xref py py-mod docutils literal"><span class="pre">io</span></code></a> module.</li>
<li><p class="first"><code class="xref py py-func docutils literal"><span class="pre">reduce()</span></code> は削除されました。もし本当に必要なら <a class="reference internal" href="../library/functools.html#functools.reduce" title="functools.reduce"><code class="xref py py-func docutils literal"><span class="pre">functools.reduce()</span></code></a> を使用してください。ほぼ間違いなく <a class="reference internal" href="../reference/compound_stmts.html#for"><code class="xref std std-keyword docutils literal"><span class="pre">for</span></code></a> ループのほうがより可読性が高いでしょう。</p>
</li>
<li><p class="first"><code class="xref py py-func docutils literal"><span class="pre">reload()</span></code> は削除されました。  <a class="reference internal" href="../library/imp.html#imp.reload" title="imp.reload"><code class="xref py py-func docutils literal"><span class="pre">imp.reload()</span></code></a> を使用してください。</p>
</li>
<li><p class="first"><code class="xref py py-meth docutils literal"><span class="pre">dict.has_key()</span></code> は削除されました &#8211; 代わりに <a class="reference internal" href="../reference/expressions.html#in"><code class="xref std std-keyword docutils literal"><span class="pre">in</span></code></a> 演算子を使用してください。</p>
</li>
</ul>
</div>
</div>
<div class="section" id="build-and-c-api-changes">
<h2>ビルドならびに C API の変更<a class="headerlink" href="#build-and-c-api-changes" title="このヘッドラインへのパーマリンク">¶</a></h2>
<p>時間がないため、以下のC APIへの変更点のリストは <em>かなり</em> 不完全です。</p>
<ul class="simple">
<li>Support for several platforms was dropped, including but not limited
to Mac OS 9, BeOS, RISCOS, Irix, and Tru64.</li>
<li><p class="first"><span class="target" id="index-86"></span><a class="pep reference external" href="https://www.python.org/dev/peps/pep-3118"><strong>PEP 3118</strong></a>: 新たなバッファ API。</p>
</li>
<li><p class="first"><span class="target" id="index-87"></span><a class="pep reference external" href="https://www.python.org/dev/peps/pep-3121"><strong>PEP 3121</strong></a>: 例外モジュールの初期化と最終化</p>
</li>
<li><p class="first"><span class="target" id="index-88"></span><a class="pep reference external" href="https://www.python.org/dev/peps/pep-3123"><strong>PEP 3123</strong></a>: <a class="reference internal" href="../c-api/structures.html#c.PyObject_HEAD" title="PyObject_HEAD"><code class="xref c c-macro docutils literal"><span class="pre">PyObject_HEAD</span></code></a> を標準的な C に一致。</p>
</li>
<li><p class="first">制限付き実行 の C API サポートはこれ以上されません。</p>
</li>
<li><p class="first"><code class="xref c c-func docutils literal"><span class="pre">PyNumber_Coerce()</span></code>、<code class="xref c c-func docutils literal"><span class="pre">PyNumber_CoerceEx()</span></code>、<code class="xref c c-func docutils literal"><span class="pre">PyMember_Get()</span></code>、および <code class="xref c c-func docutils literal"><span class="pre">PyMember_Set()</span></code> C APIs は削除されました。</p>
</li>
<li><p class="first">新たな C API <a class="reference internal" href="../c-api/import.html#c.PyImport_ImportModuleNoBlock" title="PyImport_ImportModuleNoBlock"><code class="xref c c-func docutils literal"><span class="pre">PyImport_ImportModuleNoBlock()</span></code></a>、<a class="reference internal" href="../c-api/import.html#c.PyImport_ImportModule" title="PyImport_ImportModule"><code class="xref c c-func docutils literal"><span class="pre">PyImport_ImportModule()</span></code></a> のように動きますが、インポートロックでブロックしません (代わりにエラーを返します)。</p>
</li>
<li><p class="first">ブール変換の C 水準のスロットとメソッドがリネームされました: <code class="docutils literal"><span class="pre">nb_nonzero</span></code> が <code class="docutils literal"><span class="pre">nb_bool</span></code> になりました。</p>
</li>
<li><p class="first">C API から <code class="xref c c-macro docutils literal"><span class="pre">METH_OLDARGS</span></code> と <code class="xref c c-macro docutils literal"><span class="pre">WITH_CYCLE_GC</span></code> が削除されました。</p>
</li>
</ul>
</div>
<div class="section" id="performance">
<h2>パフォーマンス<a class="headerlink" href="#performance" title="このヘッドラインへのパーマリンク">¶</a></h2>
<p>The net result of the 3.0 generalizations is that Python 3.0 runs the
pystone benchmark around 10% slower than Python 2.5.  Most likely the
biggest cause is the removal of special-casing for small integers.
There&#8217;s room for improvement, but it will happen after 3.0 is
released!</p>
</div>
<div class="section" id="porting-to-python-3-0">
<h2>Python 3.0 への移植<a class="headerlink" href="#porting-to-python-3-0" title="このヘッドラインへのパーマリンク">¶</a></h2>
<p>既存の Python 2.5 や 2.6 のソースコードを Python 3.0 に移植する最良の策は以下の通りです:</p>
<ol class="arabic simple" start="0">
<li>(Prerequisite:) Start with excellent test coverage.</li>
<li>Port to Python 2.6.  This should be no more work than the average
port from Python 2.x to Python 2.(x+1).  Make sure all your tests
pass.</li>
<li>(Still using 2.6:) Turn on the <code class="xref std std-option docutils literal"><span class="pre">-3</span></code> command line switch.
This enables warnings about features that will be removed (or
change) in 3.0.  Run your test suite again, and fix code that you
get warnings about until there are no warnings left, and all your
tests still pass.</li>
<li>Run the <code class="docutils literal"><span class="pre">2to3</span></code> source-to-source translator over your source code
tree.  (See <a class="reference internal" href="../library/2to3.html#to3-reference"><span>2to3 - Python 2 から 3 への自動コード変換</span></a> for more on this tool.)  Run the
result of the translation under Python 3.0.  Manually fix up any
remaining issues, fixing problems until all tests pass again.</li>
</ol>
<p>It is not recommended to try to write source code that runs unchanged
under both Python 2.6 and 3.0; you&#8217;d have to use a very contorted
coding style, e.g. avoiding <code class="docutils literal"><span class="pre">print</span></code> statements, metaclasses,
and much more.  If you are maintaining a library that needs to support
both Python 2.6 and Python 3.0, the best approach is to modify step 3
above by editing the 2.6 version of the source code and running the
<code class="docutils literal"><span class="pre">2to3</span></code> translator again, rather than editing the 3.0 version of the
source code.</p>
<p>C 拡張を Python 3.0 に移植するには、 <a class="reference internal" href="../howto/cporting.html#cporting-howto"><span>Python 3 への拡張モジュール移植</span></a> を参照してください。</p>
</div>
</div>


          </div>
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
  <h3><a href="../contents.html">目次</a></h3>
  <ul>
<li><a class="reference internal" href="#">What&#8217;s New In Python 3.0</a><ul>
<li><a class="reference internal" href="#common-stumbling-blocks">よくある悩みの種</a><ul>
<li><a class="reference internal" href="#print-is-a-function">print関数</a></li>
<li><a class="reference internal" href="#views-and-iterators-instead-of-lists">リストからビューおよびイテレータへ</a></li>
<li><a class="reference internal" href="#ordering-comparisons">順序比較</a></li>
<li><a class="reference internal" href="#integers">整数</a></li>
<li><a class="reference internal" href="#text-vs-data-instead-of-unicode-vs-8-bit">ユニコード Vs. 8ビットからテクスト Vs. データへ</a></li>
</ul>
</li>
<li><a class="reference internal" href="#overview-of-syntax-changes">構文の変更の概要</a><ul>
<li><a class="reference internal" href="#new-syntax">新たな構文</a></li>
<li><a class="reference internal" href="#changed-syntax">変更された構文</a></li>
<li><a class="reference internal" href="#removed-syntax">削除された操作</a></li>
</ul>
</li>
<li><a class="reference internal" href="#changes-already-present-in-python-2-6">Python 2.6 で既にあった変更</a></li>
<li><a class="reference internal" href="#library-changes">ライブラリの変更</a></li>
<li><a class="reference internal" href="#pep-3101-a-new-approach-to-string-formatting"><strong>PEP 3101</strong>: 文字列成型の新たなアプローチ</a></li>
<li><a class="reference internal" href="#changes-to-exceptions">例外に関する変更</a></li>
<li><a class="reference internal" href="#miscellaneous-other-changes">その他の変更</a><ul>
<li><a class="reference internal" href="#operators-and-special-methods">演算子と特殊メソッド</a></li>
<li><a class="reference internal" href="#builtins">組み込み</a></li>
</ul>
</li>
<li><a class="reference internal" href="#build-and-c-api-changes">ビルドならびに C API の変更</a></li>
<li><a class="reference internal" href="#performance">パフォーマンス</a></li>
<li><a class="reference internal" href="#porting-to-python-3-0">Python 3.0 への移植</a></li>
</ul>
</li>
</ul>

  <h4>前のトピックへ</h4>
  <p class="topless"><a href="3.1.html"
                        title="前の章へ">What&#8217;s New In Python 3.1</a></p>
  <h4>次のトピックへ</h4>
  <p class="topless"><a href="2.7.html"
                        title="次の章へ">What&#8217;s New in Python 2.7</a></p>
<h3>このページ</h3>
<ul class="this-page-menu">
  <li><a href="../bugs.html">Report a Bug</a></li>
  <li><a href="../_sources/whatsnew/3.0.txt"
         rel="nofollow">Show Source</a></li>
</ul>

<div id="searchbox" style="display: none" role="search">
  <h3>クイック検索</h3>
    <form class="search" action="../search.html" method="get">
      <input type="text" name="q" />
      <input type="submit" value="検索" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
    <p class="searchtip" style="font-size: 90%">
    モジュール、クラス、または関数名を入力してください
    </p>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>  
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>ナビゲーション</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../genindex.html" title="総合索引"
             >索引</a></li>
        <li class="right" >
          <a href="../py-modindex.html" title="Pythonモジュール索引"
             >モジュール</a> |</li>
        <li class="right" >
          <a href="2.7.html" title="What’s New in Python 2.7"
             >次へ</a> |</li>
        <li class="right" >
          <a href="3.1.html" title="What’s New In Python 3.1"
             >前へ</a> |</li>
        <li><img src="../_static/py.png" alt=""
                 style="vertical-align: middle; margin-top: -1px"/></li>
        <li><a href="https://www.python.org/">Python</a> &raquo;</li>
        <li>
          <span class="version_switcher_placeholder">3.4.3</span>
          <a href="../index.html">Documentation</a> &raquo;
        </li>

          <li class="nav-item nav-item-1"><a href="index.html" >What&#8217;s New in Python</a> &raquo;</li> 
      </ul>
    </div>  
    <div class="footer">
    &copy; <a href="../copyright.html">Copyright</a> 1990-2015, Python Software Foundation.
    <br />
    The Python Software Foundation is a non-profit corporation.
    <a href="https://www.python.org/psf/donations/">Please donate.</a>
    <br />
    Last updated on Dec 28, 2015.
    <a href="../bugs.html">Found a bug</a>?
    <br />
    Created using <a href="http://sphinx.pocoo.org/">Sphinx</a> 1.3.1.
    <br />
    <a href="https://github.com/python-doc-ja/python-doc-ja">Pythonドキュメント日本語翻訳プロジェクト</a>
    によって翻訳されました。
    <a href="https://github.com/python-doc-ja/python-doc-ja/issues">誤訳を報告する。</a>
    </div>

  </body>
</html>